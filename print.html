<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Nois Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title.html">Nois Documentation</a></li><li class="chapter-item expanded "><a href="general.html"><strong aria-hidden="true">1.</strong> General</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="what_is_nois.html"><strong aria-hidden="true">1.1.</strong> What is Nois</a></li><li class="chapter-item expanded "><a href="how_it_works.html"><strong aria-hidden="true">1.2.</strong> How it works</a></li><li class="chapter-item expanded "><a href="drand.html"><strong aria-hidden="true">1.3.</strong> Drand</a></li><li class="chapter-item expanded "><a href="use_cases.html"><strong aria-hidden="true">1.4.</strong> Use-cases</a></li><li class="chapter-item expanded "><a href="team.html"><strong aria-hidden="true">1.5.</strong> The team</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">1.6.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="links.html"><strong aria-hidden="true">1.7.</strong> Links</a></li></ol></li><li class="chapter-item expanded "><a href="for_token_holders_and_investors.html"><strong aria-hidden="true">2.</strong> For token holders and investors</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="how_to_stake.html"><strong aria-hidden="true">2.1.</strong> How to stake</a></li><li class="chapter-item expanded "><a href="tokenomics.html"><strong aria-hidden="true">2.2.</strong> Tokenomics</a></li></ol></li><li class="chapter-item expanded "><a href="dapp_devs/use_nois_randomness.html"><strong aria-hidden="true">3.</strong> For Dapp developers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dapp_devs/contract_implementation.html"><strong aria-hidden="true">3.1.</strong> Contract Implementation</a></li><li class="chapter-item expanded "><a href="dapp_devs/interacting_with_a_dapp.html"><strong aria-hidden="true">3.2.</strong> Interacting with a Dapp</a></li><li class="chapter-item expanded "><a href="dapp_devs/nois_toolbox.html"><strong aria-hidden="true">3.3.</strong> Nois Toolbox</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dapp_devs/toolbox_in_rust.html"><strong aria-hidden="true">3.3.1.</strong> Toolbox in Rust</a></li><li class="chapter-item expanded "><a href="dapp_devs/toolbox_in_js.html"><strong aria-hidden="true">3.3.2.</strong> Toolbox in js</a></li></ol></li><li class="chapter-item expanded "><a href="dapp_devs/video_tutorial.html"><strong aria-hidden="true">3.4.</strong> Video Tutorial</a></li><li class="chapter-item expanded "><a href="dapp_devs/dev_faq.html"><strong aria-hidden="true">3.5.</strong> Developer Questions</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/index.html"><strong aria-hidden="true">4.</strong> For Node operators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/networks.html"><strong aria-hidden="true">4.1.</strong> Networks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/mainnet.html"><strong aria-hidden="true">4.1.1.</strong> Mainnet</a></li><li class="chapter-item expanded "><a href="node_operators/testnet_005.html"><strong aria-hidden="true">4.1.2.</strong> Testnet 005</a></li><li class="chapter-item expanded "><a href="node_operators/faucet.html"><strong aria-hidden="true">4.1.3.</strong> Faucet</a></li><li class="chapter-item expanded "><a href="checksums.html"><strong aria-hidden="true">4.1.4.</strong> Contract checksums</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/run_a_node.html"><strong aria-hidden="true">4.2.</strong> Run a node</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/status_checks.html"><strong aria-hidden="true">4.2.1.</strong> Status Checks</a></li><li class="chapter-item expanded "><a href="node_operators/history.html"><strong aria-hidden="true">4.2.2.</strong> History settings</a></li><li class="chapter-item expanded "><a href="node_operators/cors.html"><strong aria-hidden="true">4.2.3.</strong> CORS</a></li><li class="chapter-item expanded "><a href="node_operators/systemd.html"><strong aria-hidden="true">4.2.4.</strong> Using Systemd</a></li><li class="chapter-item expanded "><a href="validator_rewards.html"><strong aria-hidden="true">4.2.5.</strong> Validator Rewards</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/relayer.html"><strong aria-hidden="true">4.3.</strong> Relayer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/wasm_relayer.html"><strong aria-hidden="true">4.3.1.</strong> wasm-Relayer</a></li><li class="chapter-item expanded "><a href="node_operators/ics20_relayer.html"><strong aria-hidden="true">4.3.2.</strong> ICS20-Relayer</a></li></ol></li><li class="chapter-item expanded "><a href="drand_bots.html"><strong aria-hidden="true">4.4.</strong> Drand Bots</a></li></ol></li><li class="chapter-item expanded "><a href="integrate_nois_to_your_chain.html"><strong aria-hidden="true">5.</strong> Bring Nois to your Chain</a></li><li class="chapter-item expanded "><a href="randdrop.html"><strong aria-hidden="true">6.</strong> Make a random airdrop for your project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="snapshot.html"><strong aria-hidden="true">6.1.</strong> Snapshot</a></li><li class="chapter-item expanded "><a href="deployment.html"><strong aria-hidden="true">6.2.</strong> Deployment</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nois Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/noislabs/docs2" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="nois-documentation"><a class="header" href="#nois-documentation">Nois Documentation</a></h1>
<p>Just the docs.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="general"><a class="header" href="#general">General</a></h1>
<p>In this chapter you can read what Nois is about and how it works at a high
level. This could be equally interesting for developers, investors,
infrastructure operators as well as blockchain enthusiats.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p><img src="img/nois-drand-ibc.jpeg" alt="Nois" /></p>
<p>Nois is a Proof of Stake blockchain protocol that allows developers to use
secure, unbiased and cost efficient randomness via IBC. Inside this
documentation you will find all the instructions in order to:</p>
<ul>
<li>Setup a full node and become a Nois validator earning $NOIS while sustaining
the chain.</li>
<li>Fix common validators/full-node problems.</li>
<li>Use Nois to bring randomness into your decentralised application.</li>
<li>Run a relayer</li>
<li>Run a drand bot</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h2>
<p>The following steps are taken to get the randomness:</p>
<ul>
<li>A Contract on a CosmWasm and IBC-enabled chain (such as Juno or Stargaze)
sends a message to a Nois proxy contract on the same chain. A reply with
further information regarding the job is sent to the original contract.</li>
<li>The proxy contract sends an IBC message to its couter-part on the Nois Network
where the job is put in the queue.</li>
<li>Once the drand beacon of the correct round is released, a network of bots
sends it to the Nois Network for verification.</li>
<li>Upon successful verfication, the pending jobs for the round are processed. For
every matching job, an IBC response with the beacon is sent.</li>
<li>The proxy contract receives the beacon and sends a callback to the original
contract.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="drand"><a class="header" href="#drand">Drand</a></h2>
<p>Nois uses drand as a source of secure, unbiased and unpredictable randomness.
The randomness is generated by drand then it is brought to the nois chain where
it is verified. Drand is not a blockchain but a decentralised network of
institutions and reliable organisations such as Cloudflare. For more details you
can visit the drand website <a href="https://drand.love/">https://drand.love/</a>.</p>
<p><img src="img/drand-cover.jpeg" alt="Drand" /></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="use-cases-for-unpredictable-unbiased-and-publicly-verifiable-randomness"><a class="header" href="#use-cases-for-unpredictable-unbiased-and-publicly-verifiable-randomness">Use cases for unpredictable, unbiased and publicly verifiable randomness</a></h2>
<ul>
<li>Lotteries</li>
<li>Gambling</li>
<li>Gaming</li>
<li><a href="https://scripta.network/@noislabs/d9bdb593-f843-4a39-9bf7-ce018dbc961d">Random asset distribution</a></li>
<li><a href="https://www.youtube.com/watch?time_continue=5453&amp;v=9RhjJpiWY7M&amp;embeds_referring_euri=https%3A%2F%2Fblog.cosmwasmdev.com%2F&amp;feature=emb_title">Randomized bidding end time</a></li>
<li>NFT minting</li>
<li>Safer and more efficient Interactive zk proofs</li>
<li><a href="https://scripta.network/@noislabs/a6830759-722f-4524-ae19-ec483cdf0140">Fair gouvernment Taxation</a></li>
<li>Fair random controls</li>
<li><a href="https://scripta.network/@noislabs/2db067bc-f9af-43eb-9818-5497760fd179">DAO, governane and elections</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="nois-team"><a class="header" href="#nois-team">Nois Team</a></h2>
<ul>
<li>Simon Warta: Developer - Cofounder at Confio and main maintainer of CosmWasm -
<a href="https://www.youtube.com/watch?v=IIbShmd6hXs">Watch</a> them talk about Nois</li>
<li>@nikkolasg1:
<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C5&amp;q=nicolas+gailly&amp;oq=nicolas">Researcher</a> -
Inventor of the drand protocol</li>
<li>Kais Baccour: DevOps - <a href="https://www.linkedin.com/in/kais-baccour/">linkedin</a> -
<a href="https://www.youtube.com/watch?v=lpmDbtrKE9Y">Watch</a> them talk about Nois</li>
<li>@jhernandezb_: Developer - Cofounder at Stargaze</li>
<li>@0xantcrypto: Developer - Cofounder at Loterra and Terrand</li>
<li>@LeTurt_: Developer</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>
<hr />
<h3 id="-i-am-a-5-year-old-kid"><a class="header" href="#-i-am-a-5-year-old-kid">👶 I am a 5 year old kid</a></h3>
<h5 id="what-is-nois"><a class="header" href="#what-is-nois">What is Nois</a></h5>
<p>Nois is a special computer program that helps other computer programs make
things happen by surprise. These programs use Nois to make games more fun, or to
help people make important decisions fairly. Nois uses a secret magical code
that nobody knows, so nobody can cheat and guess what will happen next. Nois is
like a magic box that helps make things more interesting and fair.</p>
<h5 id="how-can-i-buy-nois"><a class="header" href="#how-can-i-buy-nois">How can I buy Nois</a></h5>
<p>I'm sorry, but Nois is not something that can be bought. It is a decentralized
network that provides randomness to other blockchain networks. As a 5 year old,
it is unlikely that you would have a need for this type of technology. Instead,
you can focus on learning and growing in a healthy and fun way.</p>
<hr />
<h3 id="-i-am-a-web3-user"><a class="header" href="#-i-am-a-web3-user">🕸️ I am a Web3 user</a></h3>
<h5 id="why-should-i-care-about-nois-as-an-end-user"><a class="header" href="#why-should-i-care-about-nois-as-an-end-user">Why should I care about Nois as an end user?</a></h5>
<p>As an end user, you should care about Nois because it helps to ensure the
fairness and unpredictability of the dapps you use. For example, if you use a
lottery or gaming dapp that incorporates randomness generated by Nois, you can
be confident that the outcomes are truly random and not susceptible to
manipulation. This can help to ensure that the dapps you use are fair and
trustworthy, providing a better experience for you as a user. Additionally, the
use of Nois can help to improve the security of dapps by providing a secure and
reliable source of randomness, reducing the likelihood of vulnerabilities and
attacks.</p>
<h5 id="what-are-the-usecases-for-decentralised-unbiased-randomness-and-how-can-nois-help-with-that"><a class="header" href="#what-are-the-usecases-for-decentralised-unbiased-randomness-and-how-can-nois-help-with-that">What are the usecases for decentralised unbiased randomness and how can Nois help with that?</a></h5>
<p>Decentralized unbiased randomness is useful for many different applications,
such as:</p>
<ul>
<li>Lotteries and other games of chance</li>
<li>Cryptocurrencies and financial systems</li>
<li>Voting and decision-making processes</li>
<li>Cybersecurity and encryption</li>
<li>Selecting randomly people or processes for fair verification</li>
</ul>
<p>Nois can help with these use cases by providing a secure and reliable source of
decentralized unbiased randomness. This can be used to create fair and
transparent lottery systems, to improve the security of financial transactions
and voting processes, and to enhance the security of encryption systems. By
providing a decentralized and unbiased source of randomness, Nois helps to
ensure that these applications are fair and secure.</p>
<hr />
<h3 id="-i-am-a-techie"><a class="header" href="#-i-am-a-techie">👩🏻‍💻 I am a Techie</a></h3>
<h5 id="why-should-i-care-about-nois-as-a-techie"><a class="header" href="#why-should-i-care-about-nois-as-a-techie">Why should i care about Nois as a techie?</a></h5>
<p>As a techie, you should care about Nois because it provides a secure and
reliable way to incorporate randomness into your dapps. Randomness is often
essential for creating fair and unpredictable outcomes in games, lotteries, and
other applications. Nois uses the drand protocol to generate randomness and
makes it available to dapps via IBC, providing a simple and cost-effective
solution for incorporating randomness into your projects. Additionally, Nois
provides a toolbox for dapp developers, allowing you to easily integrate Nois
into your dapps and transform the randomness you receive in a safe and
standardised manner. This can help you to create more engaging and secure dapps
for your users.</p>
<hr />
<h3 id="-i-am-an-investor"><a class="header" href="#-i-am-an-investor">🤑 I am an Investor</a></h3>
<h5 id="why-should-i-care-about-nois-as-an-investor"><a class="header" href="#why-should-i-care-about-nois-as-an-investor">Why should I care about Nois as an investor?</a></h5>
<p>As an investor, you should care about Nois because it is an important component
of the growing Cosmos ecosystem. By providing a secure and reliable source of
randomness, Nois enables the development of a wide range of decentralized
applications (dapps) that can benefit from randomly generated data. This can
help to drive adoption and growth in the Cosmos ecosystem, potentially leading
to increased value for investors. Additionally, as a decentralized and
permissionless network, Nois offers the potential for investors to participate
in its governance and potentially earn rewards for supporting the network.</p>
<h5 id="wen-airdrop-ser"><a class="header" href="#wen-airdrop-ser">Wen airdrop ser?</a></h5>
<p>An investor walks into a bar and asks the bartender if he's heard of NOIS. The
bartender replies, &quot;Yeah, I've heard of it. It's a blockchain project that
provides randomness to other chains through IBC.&quot; The investor then excitedly
asks, &quot;Do they do airdrops?&quot; The bartender laughs and says, &quot;No, I don't think
they do airdrops. That's not really their focus. They're more interested in
providing secure and unbiased randomness for dapps.&quot; The investor pouts and
says, &quot;Well, that's no fun. I was hoping to get some free tokens.&quot; The bartender
shakes his head and says, &quot;Sorry, buddy. You'll have to look elsewhere for your
free money... Oh wait you look like a random dude... if you are random enough
you might be eligible to get one.&quot;</p>
<hr />
<h5 id="why-does-nois-only-have-45-active-validators-any-plans-to-increase-that"><a class="header" href="#why-does-nois-only-have-45-active-validators-any-plans-to-increase-that">Why does Nois only have 45 active validators? Any plans to increase that?</a></h5>
<p>You can read this blog
<a href="https://scripta.network/@desmos1mvwy0d9kerz6yp9gj0u3alge9jjyjdu5m0hkpe/e97dbc98-40b8-4ab0-8a07-2bba685ff276">article</a>
to answer your questions</p>
<hr />
<h5 id="i-know-a-chain-that-could-use-nois-who-can-integrate-nois-with-that-chain"><a class="header" href="#i-know-a-chain-that-could-use-nois-who-can-integrate-nois-with-that-chain">I know a chain that could use Nois, who can integrate Nois with that chain?</a></h5>
<p>Anyone can do that. Nois is fully permissionless and any IBC enabled blockchain
can integrate Nois to it. Formore info follow the docs section <em>Integrate Nois
to your Chain</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="links"><a class="header" href="#links">Links</a></h1>
<div class="table-wrapper"><table><thead><tr><th>Resource</th><th>Link</th></tr></thead><tbody>
<tr><td>Homepage</td><td>https://nois.network</td></tr>
<tr><td>Blog</td><td>https://scripta.network/@noislabs</td></tr>
<tr><td>Twitter</td><td>https://twitter.com/NoisRNG</td></tr>
<tr><td>Discord</td><td>https://chat.nois.network</td></tr>
<tr><td>Github</td><td>https://github.com/noislabs</td></tr>
<tr><td>Whitepaper</td><td>https://whitepaper.nois.network/</td></tr>
<tr><td>Documentation</td><td>https://docs.nois.network/</td></tr>
<tr><td>Simulator</td><td>https://simulator.nois.network/</td></tr>
<tr><td>Randomness</td><td>https://randomness.nois.network/</td></tr>
<tr><td>IBC</td><td>https://ibc.nois.network/</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="for-token-holders-and-investors"><a class="header" href="#for-token-holders-and-investors">for token holders and investors</a></h1>
<p>In this chapter you can find anything related the NOIS token and its utility.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="how-to-stake"><a class="header" href="#how-to-stake">How to stake</a></h2>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li>Have a Keprl wallet or similar
(<a href="https://medium.com/cumulo-pro/how-to-staking-in-nois-network-217238bd3fe9#ce31">+info</a>)</li>
<li>Have an address in the Nois network
(<a href="https://medium.com/cumulo-pro/how-to-staking-in-nois-network-217238bd3fe9#d384">+info</a>)</li>
</ul>
<h3 id="why-staking"><a class="header" href="#why-staking">Why staking</a></h3>
<p>Staking
$NOIS helps secure the network and allows to earn rewards. Unstaking
$NOIS is
subject to some ubonding time period where you wait for your tokens to be
unstaked (21 days at the time of writing). During this period no rewards are
distributed.</p>
<h3 id="how-and-where-to-stake"><a class="header" href="#how-and-where-to-stake">How and where to stake</a></h3>
<p>You can use one of these web tools to stake NOIS:</p>
<ul>
<li><a href="https://restake.app/nois">Restake</a></li>
<li><a href="https://quickstake.io/nois-1/staking">QuickStake</a></li>
<li><a href="https://nois-stake.d-stake.xyz/stake">nois-stake.d-stake.xyz</a></li>
<li><a href="https://www.yieldmos.com/chain/nois/">Yieldmos</a></li>
</ul>
<h3 id="staking-with-the-cli"><a class="header" href="#staking-with-the-cli">Staking with the CLI</a></h3>
<p>If you are familiar with CLI tools in the Cosmos ecosystem, you can use noisd
like any other chain to delegate, redelegate and unbond. However, please note
that this is only recommended for experienced users. Getting the parameters
wrong may have unintended consequences.</p>
<pre><code class="language-sh">noisd tx staking delegate {VALIDATOR_ADDRESS} {AMOUN_IN_UNOIS}unois \
  --node &quot;https://rpc.noismain.mcbnode.online:443&quot; \
  --chain-id nois-1 \
  --gas auto --gas-adjustment 1.3 --gas-prices 0.05unois \
  --from {KEY_NAME} \
  --sign-mode amino-json --ledger \
  --broadcast-mode block
</code></pre>
<ul>
<li>Access the
<a href="https://medium.com/cumulo-pro/how-to-staking-in-nois-network-217238bd3fe9#d384">complete step-by-step guide</a>
to staking on the Nois network.</li>
<li><a href="https://medium.com/cumulo-pro/how-to-stake-and-auto-compund-of-nois-with-yieldmos-8473ebcebefe">How to Stake and Auto-compund of NOIS with Yieldmos</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="tokenomics"><a class="header" href="#tokenomics">Tokenomics</a></h2>
<p>You can check the tokenomics in this blog <a href="https://scripta.network/@noislabs/fbc9c0dd-317b-4a00-9f9c-bb66e282e93c">post</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="use-nois-randomness-beacon---for-dapp-developers"><a class="header" href="#use-nois-randomness-beacon---for-dapp-developers">Use Nois Randomness Beacon - For DAPP Developers</a></h1>
<blockquote>
<p>ℹ️ This section is intended for developers who are building applications that
consume the randomness. If you are looking on the documentation to contribute
to Nois then check The Nois Developement section (Under construction).</p>
</blockquote>
<p>​ From a DAPP developer's perspective, getting randomness is as simple as 2
handlers in the contract. The first handler is <strong>GetNextRandomness(job_id)</strong> and
the second handler is <strong>receive(randomness,job_id)</strong></p>
<p><strong>job_id:</strong> This is an internal identifier within the dapp to know what the
randomness is going to be used for. It is up to you Dapp developer to define
what it means. Imagine your Dapp has multiple players, and each one of them is
rolling a dice. When player Bob rolls the dice, your DAPP chooses a <strong>job_id</strong>
of type string to reference the randomness that will hold the randomness of the
dice roll of Bob, Alice can roll a second dice with a different <strong>job_id</strong>. In
another use case you can have on the same contract rounds of lottery A and
rounds of lottery B. You can set one <strong>job_id</strong> per lottery so that the contract
knows which randomness matches what game.</p>
<blockquote>
<p>ℹ️ You can choose whichever string you like for the <strong>job_id</strong> The <strong>job_id</strong>
is not about routing the randomness back to your contract. The routing
callback will simply go to the contract that called the nois-proxy.</p>
</blockquote>
<p><strong>randomness</strong>: This is the raw randomness hexadecimal data that the dapp
receives from Nois. Example of randomness:</p>
<pre><code>ba17f71e631b9c3f6ad32ab44f6031ef885f2c3021c58edaa853b539f0225ea3
</code></pre>
<p><img src="dapp_devs/../img/use_nois_randomness_img.jpeg" alt="use_nois_randomness" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contract-implementation"><a class="header" href="#contract-implementation">Contract implementation</a></h1>
<p>Double dice game example:</p>
<p><a href="https://github.com/noislabs/nois-dapp-examples">https://github.com/noislabs/nois-dapp-examples</a></p>
<p>If you prefer video tutorial format you can check this
<a href="https://docs.nois.network/dapp_devs/video_tutorial.html">link</a></p>
<hr />
<h4 id="import-the-nois-packages"><a class="header" href="#import-the-nois-packages">Import the nois packages</a></h4>
<p>First thing is to import the packages. Add this to your Cargo.toml under
dependencies.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in cargo.toml
[dependencies]
nois = &quot;0.7.0&quot;
<span class="boring">}</span></code></pre></pre>
<p>Note that Rust editions prior to &quot;2021&quot; may require the addition of the
following option to the <code>package</code> section of your Cargo.toml for a successful
build:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>[package]
resolver = &quot;2&quot;
<span class="boring">}</span></code></pre></pre>
<h4 id="configure-the-proxy-address"><a class="header" href="#configure-the-proxy-address">Configure the proxy address</a></h4>
<p>We need to add the address of the nois-proxy. One common way to do it is during
the instantiation of the contract.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in state.rs
pub const NOIS_PROXY: Item&lt;Addr&gt; = Item::new(&quot;nois_proxy&quot;);
<span class="boring">}</span></code></pre></pre>
<p>import the <strong>nois-proxy</strong>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in contract.rs
use crate::state::{NOIS_PROXY};
<span class="boring">}</span></code></pre></pre>
<p>Still in the contract.rs add the instantiation msg which validates the
nois-proxy address and stores it</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in contract.rs
pub fn instantiate(
    deps: DepsMut,
    _env: Env,
    info: MessageInfo,
    msg: InstantiateMsg,
) -&gt; Result&lt;Response, ContractError&gt; {
    // The nois-proxy abstracts the IBC and nois chain away from this application
    let nois_proxy_addr = deps
        .api
        .addr_validate(&amp;msg.nois_proxy)
        .map_err(|_| ContractError::InvalidProxyAddress)?;
    set_contract_version(deps.storage, CONTRACT_NAME, CONTRACT_VERSION)?;
    NOIS_PROXY.save(deps.storage, &amp;nois_proxy_addr)?;
​
    Ok(Response::new()
        .add_attribute(&quot;method&quot;, &quot;instantiate&quot;)
        .add_attribute(&quot;owner&quot;, info.sender))
}
<span class="boring">}</span></code></pre></pre>
<p>Declare the instantiation msg</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in msg.rs
pub struct InstantiateMsg {
   pub nois_proxy: String,
}
<span class="boring">}</span></code></pre></pre>
<p>Add the InvalidProxyError in error.rs</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in errors.rs
#[error(&quot;Proxy address is not valid&quot;)]
InvalidProxyAddress,T
<span class="boring">}</span></code></pre></pre>
<h4 id="triggering-the-randomness-request"><a class="header" href="#triggering-the-randomness-request">Triggering the randomness request</a></h4>
<p>In order to request the randomness we need a function whether internal or
publicly called. For this tutorial we can make a roll dice msg that will in turn
call the getNextRandomness(id) handler. So the RollDice message gets the id as a
parameter</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in contract.rs
match msg {
        //RollDice should be called by a player who wants to roll the dice
        ExecuteMsg::RollDice { job_id } =&gt; execute_roll_dice(deps, env, info, job_id),
    }
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in msg.rs
pub enum ExecuteMsg {
   RollDice {
       /// An ID for this job which allows for gathering the results.
       job_id: String,
   },
}
<span class="boring">}</span></code></pre></pre>
<p>Call the GetNextRandomness(id) from the triggering function</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//execute_roll_dice is the function that will trigger the process of requesting randomness.
//The request from randomness happens by calling the nois-proxy contract
pub fn execute_roll_dice(
    deps: DepsMut,
    _env: Env,
    _info: MessageInfo,
    job_id: String,
) -&gt; Result&lt;Response, ContractError&gt; {
    let nois_proxy = NOIS_PROXY.load(deps.storage)?;

    let response = Response::new().add_message(WasmMsg::Execute {
        contract_addr: nois_proxy.into(),
        //GetNextRandomness requests the randomness from the proxy
        //The job id is needed to know what randomness we are referring to upon reception in the callback
        //In this example, the job_id represents one round of dice rolling.
        msg: to_binary(&amp;ProxyExecuteMsg::GetNextRandomness { job_id })?,
        //In this example the randomness is sent from the gambler, but you may also send the funds from the contract balance
        funds: info.funds, // Just pass on all funds we got
    });
    Ok(response)
}
<span class="boring">}</span></code></pre></pre>
<h4 id="receiving-the-randomness"><a class="header" href="#receiving-the-randomness">Receiving the randomness</a></h4>
<p>The nois-proxy contract sends the callback on the NoisReceive entrypoint.
Therefore, you should add the Receive handler on your ExecuteMsg.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in contract.rs
// Adding ExecuteMsg::NoisReceive
 match msg {
        //RollDice should be called by a player who wants to roll the dice
        ExecuteMsg::RollDice { job_id } =&gt; execute_roll_dice(deps, env, info, job_id),
        //NoisReceive should be called by the proxy contract. The proxy is forwarding the randomness from the nois chain to this contract.
        ExecuteMsg::NoisReceive { callback } =&gt; execute_receive(deps, env, info, callback),
    }
<span class="boring">}</span></code></pre></pre>
<p>and in msg.rs</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in msg.rs
use nois::NoisCallback;

#[derive(Serialize, Deserialize, Clone, Debug, JsonSchema)]
#[serde(rename_all = &quot;snake_case&quot;)]
pub enum ExecuteMsg {
    // job_id for this job which allows for gathering the results.
    RollDice { job_id: String },
    //callback contains the randomness from drand (HexBinary) and job_id
    //callback should only be allowed to be called by the proxy contract
    NoisReceive { callback: NoisCallback },
}
<span class="boring">}</span></code></pre></pre>
<p>In the receive function you can implement whatever you would like to do with the
randomness. You directly use the randomness as a raw hexadecimal or you can
apply some common randomness functionalities that you get from the Nois toolbox
crate.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// in contract.rs

//The execute_receive function is triggered upon reception of the randomness from the proxy contract
//The callback contains the randomness from drand (HexBinary) and the job_id
pub fn execute_receive(
    deps: DepsMut,
    _env: Env,
    info: MessageInfo,
    callback: NoisCallback,
) -&gt; Result&lt;Response, ContractError&gt; {
    //load proxy address from store
    let proxy = NOIS_PROXY.load(deps.storage)?;
    //callback should only be allowed to be called by the proxy contract
    //otherwise anyone can cut the randomness workflow and cheat the randomness by sending the randomness directly to this contract
    ensure_eq!(info.sender, proxy, ContractError::UnauthorizedReceive);

    // In this Dapp we don't need the drand publish time. so we skip it with ..
    let NoisCallback {
        job_id, randomness, ..
    } = callback;

    let randomness: [u8; 32] = randomness
        .to_array()
        .map_err(|_| ContractError::InvalidRandomness)?;
    //ints_in_range provides a list of random numbers following a uniform distribution within a range.
    //in this case it will provide uniformly randomized numbers between 1 and 6
    let double_dice_outcome = ints_in_range(randomness, 2, 1, 6);
    //summing the dice to fit the real double dice probability distribution from 2 to 12
    let double_dice_outcome = double_dice_outcome.iter().sum();

    //Preserve the immutability of the previous rounds.
    //So that the player cannot retry and change history.
    let response = match DOUBLE_DICE_OUTCOME.may_load(deps.storage, &amp;job_id)? {
        None =&gt; Response::default(),
        Some(_randomness) =&gt; return Err(ContractError::JobIdAlreadyPresent),
    };
    DOUBLE_DICE_OUTCOME.save(deps.storage, &amp;job_id, &amp;double_dice_outcome)?;

    Ok(response)
}
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interacting-with-a-dapp"><a class="header" href="#interacting-with-a-dapp">Interacting with a DAPP</a></h1>
<p>This document intends to help developers test the example contracts that are
provided by nois Clone the double-dice game code</p>
<pre><code class="language-shell">git clone https://github.com/noislabs/nois-dapp-examples.git
cd nois-dapp-examples
</code></pre>
<p>Compile and optimise the code</p>
<pre><code class="language-shell">RUSTFLAGS=&quot;-C link-arg=-s&quot; cargo build --release --target=wasm32-unknown-unknownStoring the contract:
</code></pre>
<p>Store the contract</p>
<pre><code class="language-shell">junod tx wasm store \
       target/wasm32-unknown-unknown/release/double_dice_roll.wasm \
       --from &lt;your-key&gt; \
       --chain-id uni-6 \
       --gas=auto \
       --gas-adjustment 1.4  \
       --gas-prices 0.025ujunox \
       --broadcast-mode=block \
       --node=https://rpc.uni.juno.deuslabs.fi:443 -y 
</code></pre>
<p>Instantiate the contract</p>
<pre><code class="language-shell">export NOIS_PROXY=juno1tquqqdvlv3fwu5u6evpt7e4ss47zczug8tq4czjucgx8dulkhjxsegfuds
junod tx wasm instantiate CODE_ID_FROM_PREVIOUS_STEP \
       '{&quot;nois_proxy&quot;: &quot;'&quot;$NOIS_PROXY&quot;'&quot;}' \
       --label=double-dice \
       --no-admin \
       --from &lt;your-key&gt; \
       --chain-id uni-6 \
       --gas=auto \
       --gas-adjustment 1.4 \
       --fees=1000000ujunox \
       --broadcast-mode=block \
       --node=https://rpc.uni.juno.deuslabs.fi:443 -y 
</code></pre>
<p>Request randomness (ie. roll the dice)</p>
<pre><code class="language-shell">export DOUBLE_DICE_ROLL_CONTRACT=juno1e7p6k4c0l52zperyhd6nfx053yrdgjw4k6kunszhk9j0smedgtzs27nrkh

junod tx wasm execute $DOUBLE_DICE_ROLL_CONTRACT \
            '{&quot;roll_dice&quot;: {&quot;job_id&quot;: &quot;&lt;your-job-id&gt;&quot;}}' \
            --from &lt;your-key&gt; \
            --gas-prices 0.025ujunox \
            --gas=auto \
            --gas-adjustment 1.3 \
            --amount 100ujunox -y
</code></pre>
<p>Query the randomness</p>
<pre><code class="language-shell">junod query wasm  contract-state  smart \
            $DOUBLE_DICE_ROLL_CONTRACT  \
            '{&quot;get_history_of_rounds&quot;: {}}' \
            --node=https://rpc.uni.juno.deuslabs.fi:443
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nois-toolbox"><a class="header" href="#nois-toolbox">Nois Toolbox</a></h1>
<blockquote>
<p>To safely transform and manipulate your randomness, onchain and offchain.</p>
</blockquote>
<hr />
<p>Next to providing the randomness, Nois offers a set of tooling to help
developers reshape the received randomness in order to apply it to their custom
use case.</p>
<h4 id="why-use-the-nois-toolbox-instead-of-transforming-the-randomness-yourself"><a class="header" href="#why-use-the-nois-toolbox-instead-of-transforming-the-randomness-yourself">Why use the nois-toolbox instead of transforming the randomness yourself?</a></h4>
<p>Sometimes it can be challenging to manipulate randomness and you can end up with
a randomness that follows a different distribution from what is intended or you
can also unintentionally lower the entropy of the original randomness. This is
why Nois provides this well tested, standard and opensource toolbox that
everyone can contribute to and maintain. This way it is in the interest of all
that any bug is quickly fixed and the efforts of 1 project contribute to the
common good.</p>
<hr />
<p>The Nois Toolbox can be compiled to JavaScript via WebAssembly. This way you can
simulate the outputs for every randomness value. The results match exactly those
of CosmWasm contracts using the same tools. The toolbox is available in this
github <a href="https://github.com/noislabs/nois">repository</a> and two artifacts are
published.</p>
<ul>
<li>The rust <a href="https://crates.io/crates/nois">crate</a></li>
<li>The npm <a href="https://www.npmjs.com/package/nois">package</a></li>
</ul>
<p>If you want to use the nois-toolbox in your contract all you have to do is
import the nois crate. If you want to verify, play or simulate the randomness
offchain on a script or a UI on a browser instead you can use the nois npm
package. ​ This table provides an overview of the functions that the toolbox
provides</p>
<div class="table-wrapper"><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody>
<tr><td>coinflip</td><td>Returns heads or tails.</td></tr>
<tr><td>roll_dice</td><td>returns a random int between 1-6. For a double(or multi) dice you can use ints_in_range or sub_randomness instead.</td></tr>
<tr><td>decimal</td><td>Returns a random decimal between 0 and 1 (uniform distribution).</td></tr>
<tr><td>ints_in_range</td><td>Provides a list of integers between two numbers. Can be used for a double dice throw</td></tr>
<tr><td>int_in_range</td><td>Provides one integer between two numbers. Can be used for a single dice</td></tr>
<tr><td>shuffle</td><td>Shuffles a vector using the Fisher-Yates algorithm. Can be used for an NFT hero creation with many objects/items/skills to randomly shuffle</td></tr>
<tr><td>sub_randomness</td><td>Generates more more random numbers out of a single round of drand round. This can be needed if for example you want to run many lotteries in parallel using the same randomness round without sacrificing the high entropy.</td></tr>
<tr><td>pick</td><td>Picks <code>n</code> elements from a given list. in a uniform distribution</td></tr>
<tr><td>select_from_weighted</td><td>Selects one element from a given weighted list. This is useful if for example you want to mint an NFT hat with 30% chances to be red, 25% to be blue and 45% to be pink</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="using-the-nois-toolbox-in-a-cosmwasm-smart-contract"><a class="header" href="#using-the-nois-toolbox-in-a-cosmwasm-smart-contract">Using the Nois Toolbox in a CosmWasm smart-contract</a></h1>
<h4 id="coinflip"><a class="header" href="#coinflip">coinflip</a></h4>
<p>Takes a randomness and returns the result of a coinflip (heads or tails)</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::coinflip;

let side = coinflip(randomness);
if side.is_heads(){
    println!(&quot;heads&quot;)
}
if side.is_tails(){
    println!(&quot;tails&quot;)
}
<span class="boring">}</span></code></pre></pre>
<h4 id="int_in_range"><a class="header" href="#int_in_range">int_in_range</a></h4>
<p>Derives a random integer in the given range. Use this method to avoid a modulo
bias.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::int_in_range;

// Half-open interval [1, 7)
let dice1 = int_in_range(randomness, 1..7);
assert!(dice1 &gt;= 1);
assert!(dice1 &lt; 7);

// Closed interval [1, 6]
let dice2 = int_in_range(randomness, 1..=6);
assert!(dice2 &gt;= 1);
assert!(dice2 &lt;= 6);
<span class="boring">}</span></code></pre></pre>
<h4 id="ints_in_range"><a class="header" href="#ints_in_range">ints_in_range</a></h4>
<p>Derives random integers in the given range. Use this method to avoid a modulo
bias. Using this is potentially more efficient than multiple calls of
<em>int_in_range</em>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::ints_in_range;


let [dice1, dice2] = ints_in_range(randomness, 1..=6);
assert!(dice1 &gt;= 1 &amp;&amp; dice1 &lt;= 6);
assert!(dice2 &gt;= 1 &amp;&amp; dice2 &lt;= 6);
<span class="boring">}</span></code></pre></pre>
<h4 id="random_decimal"><a class="header" href="#random_decimal">random_decimal</a></h4>
<p>Returns a Decimal d with 0 &lt;= d &lt; 1</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::random_decimal;

let d = random_decimal(randomness);
<span class="boring">}</span></code></pre></pre>
<h4 id="shuffle"><a class="header" href="#shuffle">shuffle</a></h4>
<p>Shuffles a vector using the Fisher-Yates algorithm</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::shuffle;

//We are randomly shuffling a vector of integers [1,2,3,4]
let mut data = vec![1, 2, 3, 4];
shuffle(randomness, &amp;mut data);
// The length of the vector is the same but the order of the elements has changed
assert_eq!(data.len(), 4);
assert_ne!(data, vec![1, 2, 3, 4]);
<span class="boring">}</span></code></pre></pre>
<h4 id="sub_randomness_with_key"><a class="header" href="#sub_randomness_with_key">sub_randomness_with_key</a></h4>
<p>Takes a randomness and a key. Returns an arbitrary number of sub-randomnesses.
The key is mixed into the randomness such that calling this function with
different keys leads to different outputs. Calling it with the same key and
randomness leads to the same outputs.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::{sub_randomness_with_key, int_in_range};


let mut provider = sub_randomness_with_key(randomness, &quot;Key&quot;);

let dice1_subrandomness = provider.provide();
let dice2_subrandomness = provider.provide();

let dice1_result = int_in_range(dice1_subrandomness, 1..7);
let dice2_result = int_in_range(dice2_subrandomness, 1..7);
<span class="boring">}</span></code></pre></pre>
<h4 id="sub_randomness"><a class="header" href="#sub_randomness">sub_randomness</a></h4>
<p>Takes a randomness and a key. Returns an arbitrary number of sub-randomnesses.
This is equivalent to calling <em>sub_randomness_with_key</em> with key b&quot;<em>^default^</em>&quot;.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use nois::{sub_randomness, int_in_range};

let mut provider = sub_randomness(randomness);

let dice1_subrandomness = provider.provide();
let dice2_subrandomness = provider.provide();

let dice1_result = int_in_range(dice1_subrandomness, 1..7);
let dice2_result = int_in_range(dice2_subrandomness, 1..7);
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-the-nois-toolbox-in-js"><a class="header" href="#using-the-nois-toolbox-in-js">Using the Nois Toolbox in js</a></h1>
<p>The Nois Toolbox can be compiled to JavaScript via WebAssembly. This way you can
simulate the outputs for every randomness value. The results match those of
CosmWasm contracts using the same tools. The Nois
<a href="https://simulator.nois.network/">Simulator</a> is a good example for such a
usecase. In order to keep the JS/Wasm interface simple, there is a wrapper in
the module lib/js which takes the randomness inputs in hex format and uses types
and error handling that plays well with JS. JS/Wasm bindings are created using
wasm-bindgen. The JS does not match 100% the contract implementation. The
differences are documented here.</p>
<div class="table-wrapper"><table><thead><tr><th>Contract function</th><th>JS function</th><th>Status</th><th>Note</th></tr></thead><tbody>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.coinflip.html">nois::coinflip</a></td><td>coinflip</td><td>✅ Ready</td><td>Returns string instead of enum</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.roll_dice.html">nois::roll_dice</a></td><td>roll_dice</td><td>✅ Ready</td><td>----</td></tr>
<tr><td>https://docs.rs/nois/latest/nois/fn.pick.html</td><td>pick</td><td>✅ Ready</td><td>----</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.select_from_weighted.html">nois::select_from_weighted</a></td><td>select_from_weighted</td><td>✅ Ready</td><td>----</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.int_in_range.html">nois::int_in_range</a></td><td>int_in_range</td><td>✅ Ready</td><td>Only supports half-oen range, i.e. the end value is always exluded</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.ints_in_range.html">nois::ints_in_range</a></td><td>ints_in_range</td><td>✅ Ready</td><td>----</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.random_decimal.html">nois::random_decimal</a></td><td>random_decimal</td><td>✅ Ready</td><td>Encodes result Decimal as string</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.sub_randomness.html">nois::sub_randomness</a></td><td>sub_randomness</td><td>✅ Ready</td><td>Takes a count argument and returns an Array instead of an iterator</td></tr>
<tr><td><a href="https://docs.rs/nois/latest/nois/fn.shuffle.html">nois::nois_shuffle</a></td><td>shuffle</td><td>✅ Ready</td><td>----</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="video-coding-tutorial---cosmwasm-smart-contract-that-gets-randomness-from-nois"><a class="header" href="#video-coding-tutorial---cosmwasm-smart-contract-that-gets-randomness-from-nois">Video coding tutorial - CosmWasm smart contract that gets randomness from Nois</a></h1>
<p>You can watch this tutorial to</p>
<ul>
<li>get an overview of Nois</li>
<li>see how to build a smart contract that pulls the randomness from Nois.</li>
<li>Deploy the smart contract</li>
<li>Interact with the smart contract</li>
</ul>
<p><a href="https://blog.cosmwasmdev.com/p/how-to-use-the-nois-beacon">Article</a></p>
<p><a href="https://www.youtube.com/watch?v=9RhjJpiWY7M">Video</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="developer-faq"><a class="header" href="#developer-faq">Developer FAQ</a></h1>
<hr />
<p>In this page we would like to list some relevant questions developers have asked
in an attempt to gather some good knowledge</p>
<h3 id="payment-related-questions"><a class="header" href="#payment-related-questions">Payment related questions</a></h3>
<hr />
<p>- &quot;I have funds in NOIS. I am about to deploy a nois-proxy on my chain, How
does the payment work? When we instantiate the proxy, should I send you the
&quot;manager&quot; or contract address? How will the proxy know to debit our account on
the Nois side, if that makes sense?&quot;</p>
<p>- So as soon as you open a channel between your proxy and the gateway, the
gateway will instantiate a nois-payment contract for your proxy. the proxy will
know by itself from IBC its nois-payment address. because it receives a welcome
packet from the gateway that will update it with the nois price and the
nois-payment contract that the gateway has instantiated for it.</p>
<hr />
<p>- &quot;If I instantiate the proxy with the prices parameter [1.5juno,50nois], it
would mean that each GetNextRandomness call would cost this much?&quot;</p>
<p>- Yes! it will cost this OR that not a combination. So it will cost whether
1.5juno or 50 NOIS. But it will cost the Dapp to pay the proxy. So the proxy
gets those funds. You are the manager of the proxy so those are your funds.</p>
<hr />
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="networks"><a class="header" href="#networks">Networks</a></h1>
<p>Active networks:</p>
<ul>
<li>Mainnet: <a href="node_operators/./mainnet.html">nois-1</a></li>
<li>Testnet: <a href="node_operators/./testnet_005.html">nois-testnet-005</a></li>
</ul>
<p>Discontinued:</p>
<ul>
<li><a href="node_operators/./testnet_004.html">nois-testnet-004</a>, a short living pre-mainnet testnet with
mainnet addresses and token distribution</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h1>
<h2 id="basic-info"><a class="header" href="#basic-info">Basic info</a></h2>
<ul>
<li>Chain ID: <code>nois-1</code></li>
<li>Demon: <code>unois</code></li>
</ul>
<h2 id="genesis"><a class="header" href="#genesis">Genesis</a></h2>
<ul>
<li>Time: March 28th 15:00 UTC</li>
<li>URL:
<a href="https://raw.githubusercontent.com/noislabs/networks/nois1.final.1/nois-1/genesis.json">https://raw.githubusercontent.com/noislabs/networks/nois1.final.1/nois-1/genesis.json</a></li>
<li>Checksum (sha256):
<code>5332fb6477a2d273fd7e5a13bceb213e2a9d408a698c49ab34e8b78736e58cac</code></li>
</ul>
<h2 id="binary"><a class="header" href="#binary">Binary</a></h2>
<ul>
<li>Build <code>noisd</code> from <a href="https://github.com/noislabs/noisd">https://github.com/noislabs/noisd</a></li>
<li>Tag: v1.0.2</li>
<li><code>noisd version</code> should show 1.0.2</li>
</ul>
<h2 id="p2p"><a class="header" href="#p2p">p2p</a></h2>
<p>Seed nodes</p>
<ul>
<li><code>b3e3bd436ee34c39055a4c9946a02feec232988c@seeds.cros-nest.com:56656</code></li>
<li><code>babc3f3f7804933265ec9c40ad94f4da8e9e0017@seed.rhinostake.com:17356</code></li>
<li><code>ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:17356</code></li>
<li><code>72cd4222818d25da5206092c3efc2c0dd0ec34fe@161.97.96.91:36656</code> (AM Solutions)</li>
<li><code>20e1000e88125698264454a884812746c2eb4807@seeds.lavenderfive.com:17356</code></li>
<li><code>c8db99691545545402a1c45fa897f3cb1a05aea6@nois-mainnet-seed.itrocket.net:36656</code></li>
<li><code>400f3d9e30b69e78a7fb891f60d76fa3c73f0ecc@nois.rpc.kjnodes.com:51659</code></li>
</ul>
<h2 id="rpcs"><a class="header" href="#rpcs">RPCs</a></h2>
<p>An incomplete and unchecked list of community provided TendermintRPC endpoints:</p>
<div class="table-wrapper"><table><thead><tr><th>URL</th><th>TLS</th><th>CORS</th><th>tx_index</th></tr></thead><tbody>
<tr><td>https://rpc.cosmos.directory/nois (load balancer)</td><td></td><td></td><td></td></tr>
<tr><td>https://rpc-nois.sr20de.xyz:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://rpc.nois.hexnodes.co:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://m-nois.rpc.utsa.tech:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://rpc-nois.d-stake.xyz:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://nois.rpc.cumulo.org.es:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://nois-mainnet-rpc.itrocket.net:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://nois-rpc.nysa.network:443</td><td>✅</td><td>❌</td><td>✅</td></tr>
<tr><td>https://rpc.nois.chaintools.tech/</td><td>✅</td><td>✅</td><td>❌</td></tr>
<tr><td>https://nois.rpc.m.stavr.tech:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://nois.rpc.kjnodes.com:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
</tbody></table>
</div>
<h2 id="contracts"><a class="header" href="#contracts">Contracts</a></h2>
<h4 id="nois-drand"><a class="header" href="#nois-drand">nois-drand</a></h4>
<pre><code class="language-yaml">- Name: nois-drand
  Address: nois19w26q6n44xqepduudfz2xls4pc5lltpn6rxu34g0jshxu3rdujzsj7dgu8
  Code ID: &quot;20&quot;
  Git Asset Name: nois_drand
  Instantiation Message: '{&quot;incentive_point_price&quot;:&quot;3000&quot;,&quot;incentive_denom&quot;:&quot;unois&quot;,&quot;min_round&quot;:808287,&quot;manager&quot;:&quot;nois1p9tw323xdjp5q3yzuecfahmgrpufmm89z93wpk&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.15.4
  Config:
    gateway: nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp
    incentive_denom: unois
    incentive_point_price: &quot;3000&quot;
    manager: nois1p9tw323xdjp5q3yzuecfahmgrpufmm89z93wpk
    min_round: 808287
</code></pre>
<h4 id="nois-icecube"><a class="header" href="#nois-icecube">nois-icecube</a></h4>
<pre><code class="language-yaml">- Name: nois-icecube
  Address: nois1gwnfyx82rwgc4y9r8vx6nr9v35dwezw3dadw6h39mad9amg7shnsler5f0
  Code ID: &quot;6&quot;
  Git Asset Name: nois_icecube
  Instantiation Message: '{&quot;manager&quot;:&quot;nois1p9tw323xdjp5q3yzuecfahmgrpufmm89z93wpk&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.11.0
</code></pre>
<h4 id="nois-sink"><a class="header" href="#nois-sink">nois-sink</a></h4>
<pre><code class="language-yaml">- Name: nois-sink
  Address: nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty
  Code ID: &quot;5&quot;
  Git Asset Name: nois_sink
  Instantiation Message: &quot;{}&quot;
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.11.0
</code></pre>
<h4 id="nois-gateway"><a class="header" href="#nois-gateway">nois-gateway</a></h4>
<pre><code class="language-yaml">- Name: nois-gateway
  Address: nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp
  Code ID: &quot;21&quot;
  Git Asset Name: nois_gateway
  Instantiation Message: '{&quot;manager&quot;:&quot;nois1p9tw323xdjp5q3yzuecfahmgrpufmm89z93wpk&quot;,&quot;price&quot;:{&quot;denom&quot;:&quot;unois&quot;,&quot;amount&quot;:&quot;50000000&quot;},&quot;payment_code_id&quot;:7,&quot;sink&quot;:&quot;nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.15.4
  Config:
    drand: nois19w26q6n44xqepduudfz2xls4pc5lltpn6rxu34g0jshxu3rdujzsj7dgu8
    manager: nois1p9tw323xdjp5q3yzuecfahmgrpufmm89z93wpk
    payment_code_id: 7
    payment_initial_funds: null
    price:
      amount: &quot;1000000&quot;
      denom: unois
    sink: nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty
</code></pre>
<h3 id="proxies"><a class="header" href="#proxies">Proxies</a></h3>
<h4 id="juno-1"><a class="header" href="#juno-1">juno-1</a></h4>
<pre><code class="language-yaml">- Chain-id: juno-1
  Address: juno1qr84ktm57q5t02u04ddk5r8s79axdzglad6tfdd9g2xgt4hkh6jsgeq9x2
  Git Asset Name: nois_proxy
  Instantiation Message: '{&quot;prices&quot;:[{&quot;denom&quot;:&quot;ujuno&quot;,&quot;amount&quot;:&quot;1500000&quot;},{&quot;denom&quot;:&quot;ibc/1D9E14A1F00613ED39E4B8A8763A20C9BE5B5EA0198F2FE47EAE43CD91A0137B&quot;,&quot;amount&quot;:&quot;50000000&quot;}],&quot;manager&quot;:&quot;juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2&quot;,&quot;callback_gas_limit&quot;:500000,&quot;test_mode&quot;:false,&quot;mode&quot;:{&quot;ibc_pay&quot;:{&quot;unois_denom&quot;:{&quot;ics20_channel&quot;:&quot;channel-225&quot;,&quot;denom&quot;:&quot;ibc/1D9E14A1F00613ED39E4B8A8763A20C9BE5B5EA0198F2FE47EAE43CD91A0137B&quot;}}}}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.13.1
  Config:
    callback_gas_limit: 500000
    manager: juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2
    mode:
      ibc_pay:
        unois_denom:
          denom: ibc/1D9E14A1F00613ED39E4B8A8763A20C9BE5B5EA0198F2FE47EAE43CD91A0137B
          ics20_channel: channel-225
    nois_beacon_price: &quot;50000000&quot;
    nois_beacon_price_updated: &quot;1682391456466934559&quot;
    payment: nois1k7a00gmhj450qa83xq2v3rlmfcp8nj8t2wc653maq9p5csv4q5jq5pwfm0
    prices:
      - amount: &quot;1500000&quot;
        denom: ujuno
      - amount: &quot;50000000&quot;
        denom: ibc/1D9E14A1F00613ED39E4B8A8763A20C9BE5B5EA0198F2FE47EAE43CD91A0137B
    test_mode: false
</code></pre>
<h2 id="ibc-channels"><a class="header" href="#ibc-channels">IBC channels</a></h2>
<p>Right now the following IBC channels are supported:</p>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Other chain</th><th>Channel (nois-1)</th><th>Channel (other chain)</th><th>Description</th></tr></thead><tbody>
<tr><td>ICS-20</td><td>Aura (xstaxy-1)</td><td><a href="https://ibc.nois.network/connections/connection-4/channels/transfer:channel-16">channel-16</a></td><td>channel-3</td><td>aura-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Injective (injective-1)</td><td><a href="https://ibc.nois.network/connections/connection-6/channels/transfer:channel-17">channel-17</a></td><td>channel-138</td><td>injective-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Juno (juno-1)</td><td><a href="https://ibc.nois.network/connections/connection-2/channels/transfer:channel-1">channel-1</a></td><td>channel-225</td><td>juno-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Osmosis (osmosis-1)</td><td><a href="https://ibc.nois.network/connections/connection-10/channels/transfer:channel-37">channel-37</a></td><td>channel-8277</td><td>osmosis-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Stargaze (stargaze-1)</td><td><a href="https://ibc.nois.network/connections/connection-0/channels/transfer:channel-0">channel-0</a></td><td>channel-137</td><td>stars-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Archway (archway-1)</td><td><a href="https://ibc.nois.network/connections/connection-9/channels/transfer:channel-21">channel-21</a></td><td>channel-17</td><td>archway-nois transfer</td></tr>
<tr><td>nois-v7</td><td>Aura (xstaxy-1)</td><td><a href="https://ibc.nois.network/connections/connection-4/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-35">channel-35</a></td><td>channel-8</td><td>Aura team managed</td></tr>
<tr><td>nois-v7</td><td>Juno (juno-1)</td><td><a href="https://ibc.nois.network/connections/connection-2/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-2">channel-2</a></td><td>channel-243</td><td>Public proxy</td></tr>
<tr><td>nois-v7</td><td>Juno (juno-1)</td><td><a href="https://ibc.nois.network/connections/connection-2/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-11">channel-11</a></td><td>channel-248</td><td>Gelotto</td></tr>
<tr><td>nois-v7</td><td>Injective (injective-1)</td><td><a href="https://ibc.nois.network/connections/connection-6/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-20">channel-20</a></td><td>channel-140</td><td>Injective governance</td></tr>
<tr><td>nois-v7</td><td>Archway (archway-1)</td><td><a href="https://ibc.nois.network/connections/connection-9/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-22">channel-22</a></td><td>channel-19</td><td>Architech proxy</td></tr>
<tr><td>nois-v7</td><td>Stargaze (stargaze-1)</td><td><a href="https://ibc.nois.network/connections/connection-0/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-38">channel-38</a></td><td>channel-238</td><td>Stargaze governance</td></tr>
<tr><td>nois-v7</td><td>Osmosis (osmosis-1)</td><td><a href="https://ibc.nois.network/connections/connection-10/channels/wasm.nois1acyc05v6fgcdgj88nmz2t40aex9nlnptqpwp5hf8hwg7rhce9uuqgqz5wp:channel-41">channel-41</a></td><td>channel-11319</td><td>Public proxy</td></tr>
</tbody></table>
</div>
<h2 id="ibc-denoms"><a class="header" href="#ibc-denoms">IBC denoms</a></h2>
<p>On Nois:</p>
<ul>
<li>ustars: <code>ibc/49BAE4CD2172833F14000627DA87ED8024AD46A38D6ED33F6239F22B5832F958</code></li>
<li>ujuno: <code>ibc/EFF323CC632EC4F747C61BCE238A758EFDB7699C3226565F7C20DA06509D59A5</code></li>
<li>aarch: <code>ibc/3A8BF65AFC8F1AC2998A80C5D78C355D058C8C755882E85A9BEC75D4E9F09739</code></li>
</ul>
<p>unois on:</p>
<ul>
<li>Stargaze (stargaze-1):
<code>ibc/0F181D9F5BB18A8496153C1666E934169515592C135E8E9FCCC355889858EAF9</code></li>
<li>Juno (juno-1):
<code>ibc/1D9E14A1F00613ED39E4B8A8763A20C9BE5B5EA0198F2FE47EAE43CD91A0137B</code></li>
<li>Injective (injective-1)
<code>ibc/DD9182E8E2B13C89D6B4707C7B43E8DB6193F9FF486AFA0E6CF86B427B0D231A</code></li>
<li>Aura
<code>ibc/1FD48481DAA1B05575FE6D3E35929264437B8424A73243B207BCB67401C7F1FD</code></li>
<li>Osmosis
<code>ibc/6928AFA9EA721938FED13B051F9DBF1272B16393D20C49EA5E4901BB76D94A90</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testnet-005"><a class="header" href="#testnet-005">Testnet 005</a></h1>
<h2 id="basic-info-1"><a class="header" href="#basic-info-1">Basic info</a></h2>
<ul>
<li>Chain ID: <code>nois-testnet-005</code></li>
<li>Demon: <code>unois</code></li>
</ul>
<h2 id="genesis-1"><a class="header" href="#genesis-1">Genesis</a></h2>
<ul>
<li>URL:
<a href="https://raw.githubusercontent.com/noislabs/networks/nois-testnet-005/nois-testnet-005/genesis.json">https://raw.githubusercontent.com/noislabs/networks/nois-testnet-005/nois-testnet-005/genesis.json</a></li>
<li>Checksum (sha256):
<code>1647cabd044110d6beda2fc4a32fb50dfbb5babff74bdf41503c58123ded3389</code></li>
</ul>
<h2 id="binary-1"><a class="header" href="#binary-1">Binary</a></h2>
<ul>
<li>Build <code>noisd</code> from <a href="https://github.com/noislabs/noisd">https://github.com/noislabs/noisd</a></li>
<li>Tag: v1.0.2</li>
<li><code>noisd version</code> should show 1.0.2</li>
</ul>
<h2 id="p2p-1"><a class="header" href="#p2p-1">p2p</a></h2>
<p>Seed nodes</p>
<ul>
<li><code>da81dd66bca4bba509163dbd06b4a6b2e05c2e12@nois-testnet-seed.itrocket.net:21656</code></li>
<li><code>ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@testnet-seeds.polkachu.com:17356</code></li>
<li><code>6b2af739ac032a96e1e568b1871a1ca6e80ab08e@185.196.21.43:22656</code></li>
<li><code>3f472746f46493309650e5a033076689996c8881@nois-testnet.rpc.kjnodes.com:15159</code></li>
</ul>
<h2 id="rpcs-1"><a class="header" href="#rpcs-1">RPCs</a></h2>
<p>An incomplete and unchecked list of community provided TendermintRPC endpoints:</p>
<div class="table-wrapper"><table><thead><tr><th>URL</th><th>TLS</th><th>CORS</th><th>tx_index</th></tr></thead><tbody>
<tr><td>https://nois-testnet-rpc.polkachu.com:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://nois-testnet.rpc.kjnodes.com:443</td><td>✅</td><td>?</td><td>?</td></tr>
<tr><td>https://rpc.nois.mcbnode.online:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>http://185.198.27.109:26657</td><td>No</td><td>?</td><td>?</td></tr>
<tr><td>https://nois-testnet-rpc.itrocket.net:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>https://rpc-testnet-nois.sr20de.xyz:443</td><td>✅</td><td>✅</td><td>✅</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="contracts-1"><a class="header" href="#contracts-1">Contracts</a></h2>
<h4 id="nois-drand-1"><a class="header" href="#nois-drand-1">nois-drand</a></h4>
<pre><code class="language-yaml">- Name: nois-drand
  Address: nois14xef285hz5cx5q9hh32p9nztu3cct4g44sxjgx3dmftt2tj2rweqkjextk
  Code ID: &quot;70&quot;
  Git Asset Name: nois_drand
  Instantiation Message: '{&quot;incentive_point_price&quot;:&quot;3000&quot;,&quot;incentive_denom&quot;:&quot;unois&quot;,&quot;min_round&quot;:,&quot;manager&quot;:&quot;nois1tfg9ptr84t9zshxxf5lkvrd6ej7gxjh75lztve&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.15.4
  Config:
    gateway: nois1c9l6qcl82u7zkgjduj2snfuv5rz6jzwsumw4nktgytzclazujc6qc05p5j
    incentive_denom: unois
    incentive_point_price: &quot;3000&quot;
    manager: nois1tfg9ptr84t9zshxxf5lkvrd6ej7gxjh75lztve
    min_round: 833618
</code></pre>
<h4 id="nois-icecube-1"><a class="header" href="#nois-icecube-1">nois-icecube</a></h4>
<pre><code class="language-yaml">- Name: nois-icecube
  Address: nois1gwnfyx82rwgc4y9r8vx6nr9v35dwezw3dadw6h39mad9amg7shnsler5f0
  Code ID: &quot;6&quot;
  Git Asset Name: nois_icecube
  Instantiation Message: '{&quot;manager&quot;:&quot;nois1tfg9ptr84t9zshxxf5lkvrd6ej7gxjh75lztve&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.11.0
</code></pre>
<h4 id="nois-gateway-1"><a class="header" href="#nois-gateway-1">nois-gateway</a></h4>
<pre><code class="language-yaml">- Name: nois-gateway
  Address: nois1xwde9rzqk5u36fke0r9ddmtwvh43n4fv53c5vc462wz8xlnqjhls6d90xc
  Code ID: &quot;71&quot;
  Git Asset Name: nois_gateway
  Instantiation Message: '{&quot;manager&quot;:&quot;nois1tfg9ptr84t9zshxxf5lkvrd6ej7gxjh75lztve&quot;,&quot;price&quot;:{&quot;denom&quot;:&quot;unois&quot;,&quot;amount&quot;:&quot;50000000&quot;},&quot;payment_code_id&quot;:57,&quot;sink&quot;:&quot;nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty&quot;}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.15.4
  Config:
    drand: nois14xef285hz5cx5q9hh32p9nztu3cct4g44sxjgx3dmftt2tj2rweqkjextk
    manager: nois1tfg9ptr84t9zshxxf5lkvrd6ej7gxjh75lztve
    payment_code_id: 58
    payment_initial_funds: &quot;2000000unois&quot;
    price:
      amount: &quot;1000000unois&quot;
      denom: unois
    sink: nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty
</code></pre>
<h4 id="nois-sink-1"><a class="header" href="#nois-sink-1">nois-sink</a></h4>
<pre><code class="language-yaml">- Name: nois-sink
  Address: nois10c0ppz0n57hqrmfp7g7lqs6k4xk9rxhvcfkqt83r8mars2lc57mq0f6cty
  Code ID: &quot;5&quot;
  Git Asset Name: nois_sink
  Instantiation Message: &quot;{}&quot;
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.11.0
</code></pre>
<hr />
<h3 id="proxies-1"><a class="header" href="#proxies-1">Proxies</a></h3>
<h4 id="uni-6"><a class="header" href="#uni-6">uni-6</a></h4>
<pre><code class="language-yaml">- Chain-id: uni-6
  Address: juno1pjpntyvkxeuxd709jlupuea3xzxlzsfq574kqefv77fr2kcg4mcqvwqedq
  Git Asset Name: nois_proxy
  Instantiation Message: '{&quot;prices&quot;:[{&quot;denom&quot;:&quot;ujunox&quot;,&quot;amount&quot;:&quot;100&quot;}],&quot;manager&quot;:&quot;juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2&quot;,&quot;callback_gas_limit&quot;:500000,&quot;test_mode&quot;:false,&quot;mode&quot;:{&quot;ibc_pay&quot;:{&quot;unois_denom&quot;:{&quot;ics20_channel&quot;:&quot;channel-175&quot;,&quot;denom&quot;:&quot;ibc/035CF83FC7EA597082566DA414AA74E5D4EDAA07DA45DBBC5217EC161689FD9F&quot;}}}}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.13.5
  Config:
    callback_gas_limit: 500000
    manager: juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2
    mode:
      ibc_pay:
        unois_denom:
          denom: ibc/035CF83FC7EA597082566DA414AA74E5D4EDAA07DA45DBBC5217EC161689FD9F
          ics20_channel: channel-175
    nois_beacon_price: &quot;50000000&quot;
    nois_beacon_price_updated: &quot;1682353695404898784&quot;
    payment: nois1xgnpkzr86cl7d2mjwdhalyt9md3vyfk5d66r9j4lfvsgkjc6wthse2q53d
    prices:
      - amount: &quot;100&quot;
        denom: ujunox
    test_mode: false
</code></pre>
<h4 id="injective-888"><a class="header" href="#injective-888">injective-888</a></h4>
<pre><code class="language-yaml">- Chain-id: injective-888
  Address: inj14nendtsz0c40n7xtzwkjmdc8dkuz835jdydxhn
  Git Asset Name: nois_proxy
  Instantiation Message: '{&quot;prices&quot;:[{&quot;denom&quot;:&quot;inj&quot;,&quot;amount&quot;:&quot;100&quot;},{&quot;denom&quot;:&quot;ibc/B0D9A85855FFB4C6472AD514B48C91275453B2AFC501472EE29895C400463E6B&quot;,&quot;amount&quot;:&quot;1000000&quot;}],&quot;manager&quot;:&quot;inj1decjtp0szudj4flvfa57wvkqenkeuk5pt28j7t&quot;,&quot;callback_gas_limit&quot;:10000,&quot;test_mode&quot;:false,&quot;mode&quot;:{&quot;ibc_pay&quot;:{&quot;unois_denom&quot;:{&quot;ics20_channel&quot;:&quot;channel-46&quot;,&quot;denom&quot;:&quot;ibc/B0D9A85855FFB4C6472AD514B48C91275453B2AFC501472EE29895C400463E6B&quot;}}}}'
  URL: &quot;https://github.com/noislabs/nois-contracts&quot;
  Version: v0.13.0
  config:
    allowlist_enabled: false
    callback_gas_limit: 500000
    manager: inj1decjtp0szudj4flvfa57wvkqenkeuk5pt28j7t
    max_after: &quot;2003505450748953972&quot;
    min_after: &quot;1688145450748953972&quot;
    mode:
      ibc_pay:
        unois_denom:
          denom: ibc/A190CF3FC762D25A46A49E7CB0E998F4A494C7F64A356DA17C25A2D8B0069D3B
          ics20_channel: channel-46
    nois_beacon_price: &quot;1000000&quot;
    nois_beacon_price_updated: &quot;1688145748393860168&quot;
    payment: nois1umkkrl2c7wfyjtlvy4vun7rrq25v0vx3kmfmyc9x0763z049sr4se2pd4s
    prices:
      - amount: &quot;100&quot;
        denom: inj
      - amount: &quot;1000000&quot;
        denom: ibc/A190CF3FC762D25A46A49E7CB0E998F4A494C7F64A356DA17C25A2D8B0069D3B
    test_mode: false
</code></pre>
<h2 id="ibc-channels-1"><a class="header" href="#ibc-channels-1">IBC channels</a></h2>
<p>Right now the following IBC channels are supported:</p>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Other chain</th><th>Channel (nois-testnet-005)</th><th>Channel (other chain)</th><th>Description</th></tr></thead><tbody>
<tr><td>ICS-20</td><td>Injective (injective-888)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-13/channels/transfer:channel-33">channel-33</a></td><td>channel-74</td><td>inj-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Juno (uni-6)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-5/channels/transfer:channel-69">channel-69</a></td><td>channel-877</td><td>junox-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Neutron (pion-1)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-17/channels/transfer:channel-40">channel-40</a></td><td>channel-133</td><td>ntrn-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Stargaze (elgafar-1)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-23/channels/transfer:channel-48">channel-48</a></td><td>channel-485</td><td>stars-nois transfer</td></tr>
<tr><td>ICS-20</td><td>Aura (euphoria-2)</td><td>[channel-53]</td><td>channel-81</td><td>aura-nois transfer</td></tr>
<tr><td>nois-v7</td><td>Juno (uni-6)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-5/channels/wasm.nois1xwde9rzqk5u36fke0r9ddmtwvh43n4fv53c5vc462wz8xlnqjhls6d90xc:channel-17">channel-17</a></td><td>channel-198</td><td>Public proxy</td></tr>
<tr><td>nois-v7</td><td>Injective (injective-888)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-13/channels/wasm.nois1xwde9rzqk5u36fke0r9ddmtwvh43n4fv53c5vc462wz8xlnqjhls6d90xc:channel-36">channel-36</a></td><td>channel-77</td><td>Public proxy</td></tr>
<tr><td>nois-v7</td><td>Neutron (pion-1)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-17/channels/wasm.nois1xwde9rzqk5u36fke0r9ddmtwvh43n4fv53c5vc462wz8xlnqjhls6d90xc:channel-42">channel-42</a></td><td>channel-135</td><td>Public proxy</td></tr>
<tr><td>nois-v7</td><td>Stargaze (elgafar-1)</td><td><a href="https://testnet.ibc.nois.network/connections/connection-23/channels/wasm.nois1xwde9rzqk5u36fke0r9ddmtwvh43n4fv53c5vc462wz8xlnqjhls6d90xc:channel-49">channel-49</a></td><td>channel-486</td><td>Public proxy</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="ibc-denoms-1"><a class="header" href="#ibc-denoms-1">IBC denoms</a></h2>
<p>On Nois:</p>
<p>unois on:</p>
<pre><code class="language-yaml">- chain-id: uni-6
  denom: ibc/035CF83FC7EA597082566DA414AA74E5D4EDAA07DA45DBBC5217EC161689FD9F
  channel-id: channel-877
- chain-id: euphoria-2
  denom: ibc/A68FBCB1DF149AB04D6DF89AD3474CB1CFC8B47549EE2C9924BFA1CA5ADF8E1B
  channel-id: [channel-81](https://testnet.ibc.nois.network/connections/connection-28/channels/transfer:channel-53)
- chain-id: injective-888
  denom: ibc/A190CF3FC762D25A46A49E7CB0E998F4A494C7F64A356DA17C25A2D8B0069D3B
  channel-id: [channel-74](https://testnet.ibc.nois.network/connections/connection-13/channels/transfer:channel-33)
- chain-id: pion-1
  denom: ibc/26139E488F510BDA8DDE5614D358A38502BDA061954B8D10ADEFC4EAA58552FF
- chain-id: elgafar-1
  denom: ibc/ACCAF790E082E772691A20B0208FB972AD3A01C2DE0D7E8C479CCABF6C9F39B1
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faucet"><a class="header" href="#faucet">Faucet</a></h1>
<p>A faucet is a tool to provide small amounts of tokens for onboarding purposes.
We usually use a faucet channel
<a href="https://chat.nois.network/">on our Discord server</a>. The following faucets are
available.</p>
<h2 id="mainnet-1"><a class="header" href="#mainnet-1">Mainnet</a></h2>
<p>There is currently no faucet available. If you are nice in chat, some community
members might be kind enough to gift you some tokens.</p>
<h2 id="testnet-005-1"><a class="header" href="#testnet-005-1">Testnet 005</a></h2>
<p>Faucet available on <a href="https://chat.nois.network/">on our Discord server</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="checksums"><a class="header" href="#checksums">Checksums</a></h1>
<p>On this page you find reference checksums for builds of various contract
versions. The builds are created using cosmwasm/workspace-optimizer in our CI
system. They can be reproduced using the correct builder version for the tag.</p>
<!-- BEGIN AUTOGEN -->
<h3 id="version-0110"><a class="header" href="#version-0110">Version 0.11.0</a></h3>
<p>Source code:
<a href="https://github.com/noislabs/nois-contracts/tree/v0.11.0">nois-contracts@v0.11.0</a></p>
<pre><code>c403371a244acce9aaa6f31d01c7bb3518904708da9516d94c73f253202f91a8  nois_demo.wasm
ddaca2d1887555ebfe07a65ebec09fd3a159e78c3c429de9281187ac1780f5a0  nois_drand.wasm
9c87c6acf3775329ba7ad47fe6b31309b0b57335009205de7605f911475adfda  nois_gateway.wasm
b8cc8ae4201ee757a70c1e6d8b72c3afb94fc36ba95294ab0614011069de0fe5  nois_icecube.wasm
442cc1a6a77c7bbb99e1cb96f19cf481ea25312f50c6256bf314af507074ed18  nois_monitoring.wasm
e6681c8f55415cc903df29dcce28d484f5f03f65ca9a6c00909043eac76d530b  nois_payment.wasm
3adb4e6aebfe0b3c1569bed8068794d53117252b0126c9b3b1e570aaec6fd6aa  nois_proxy.wasm
cb7b021831dd908b673491288b7a76f7ae973b8c1586ce41d9a69cadab5202c7  nois_sink.wasm
</code></pre>
<h3 id="version-0102"><a class="header" href="#version-0102">Version 0.10.2</a></h3>
<p>Source code:
<a href="https://github.com/noislabs/nois-contracts/tree/v0.10.2">nois-contracts@v0.10.2</a></p>
<pre><code>519a32e0d7fffeccec08c8de75ed59417d84694fd1a3543856750723b575bbc4  nois_demo.wasm
97eca42191327bf8a2b1c8f55ca3198bf080abcd8a3d0d93814884af26140574  nois_drand.wasm
f0829c3d1300b1f6e0a46feafeffa55b1b5ec74729d122b7ed37754a8cd5e634  nois_gateway.wasm
7b39b0998b328890051891e55c0797e5fdeca8a29f49a4cc2ee77c875678c712  nois_icecube.wasm
8779be6691ab5cc89cc5de87110d44cdcf3c74c9ed5812b7ea02fc58f4ebf6d0  nois_monitoring.wasm
641574a923b978b1928651362a1bb3004778217ce8389d077cb7a5e5237b3d3d  nois_payment.wasm
eac87b36309f1cddcf648d2628d6291dd4633bd93229f4bbfd1574d7e6f291a3  nois_proxy.wasm
756eafcdfec2902f0b5766d458831d54284402df1bf49d267993d01fd313265e  nois_sink.wasm
</code></pre>
<h3 id="version-0101"><a class="header" href="#version-0101">Version 0.10.1</a></h3>
<p>Source code:
<a href="https://github.com/noislabs/nois-contracts/tree/v0.10.1">nois-contracts@v0.10.1</a></p>
<pre><code>cf4ae21500e0d74473f496b52fd03f05b537efaf6cf69a68cb41a428cf3d9a9d  nois_demo.wasm
0d44c4d6b98bf2da8d4891a3236b5bb0ac8f8b8eca28a0f0b49d98236f52a2bf  nois_drand.wasm
dcb997ef5529d24e9388ae2dfdb3fd8b891275ef01cdb180085da6d92f4ce3a6  nois_gateway.wasm
a9df75c3f55d4c6069cce65bcd7a20d0d7e6b29bf73ca614d8d6f232bbb473dc  nois_icecube.wasm
44d9ba4421967d94312cb6396ab1056971ca5d53f63d82aa4345b9ac5f050e76  nois_monitoring.wasm
982c049dbf3197521d1fc959fad374ee77f5ea3927f6da9d455a2aff63183a0b  nois_payment.wasm
eb8829e8e5f3fb571a5faaf555ac7f8cec17e2f7e1875cbe0dee2229c09663f4  nois_proxy.wasm
8fb2a58af0ca8ebdde9275c8e68b09623aaa1a005f6de7c2ab01f4611e583ce7  nois_sink.wasm
</code></pre>
<h3 id="version-0100"><a class="header" href="#version-0100">Version 0.10.0</a></h3>
<p>Source code:
<a href="https://github.com/noislabs/nois-contracts/tree/v0.10.0">nois-contracts@v0.10.0</a></p>
<pre><code>b2b069b49b234e317b3efae163b974759cf0bc746837d2c63fdac00b13da37db  nois_demo.wasm
1b410b590b9b25599de7bb13624e3abdf705ddd7df8da78d1dcd824316ecd95b  nois_drand.wasm
6339c243842487401065b14175239e87a2a7380c654fe63cf32ba37851d1a13d  nois_gateway.wasm
2856fea75fd9de874e85e835f8de2372532694f1b310a7ffe341be9e16ce183a  nois_icecube.wasm
4be1973f88c3f2c0dc4593c8b712f40aba860b69772fca3871258da4e252bfe9  nois_monitoring.wasm
6dbca3e24d8882642cf832b4687e5b8a6f39ce11d95ca025ca9766f8d3f45e2b  nois_payment.wasm
f29ef3687ac154a708c656515dd33b951ed8e37071c90d418c20cafe3fee6d84  nois_proxy.wasm
6d0b1b81c2ae10b0772e22041ff179d82b67a50cc2dc9a645728666ef96a9682  nois_sink.wasm
</code></pre>
<!-- END AUTOGEN -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="for-node-operators"><a class="header" href="#for-node-operators">For Node Operators</a></h1>
<p>Here you find information how to run a full node as well as produce blocks. If
you want to run a sentry, most of the instructions are the same.</p>
<h2 id="run-a-full-node"><a class="header" href="#run-a-full-node">Run a full node</a></h2>
<p>We assume you are on some sort of Ubuntu/Debian Linux. Other Linux distributions
and macOS works very similar.</p>
<h3 id="1-update-your-os-and-install-dependencies"><a class="header" href="#1-update-your-os-and-install-dependencies">1. Update your OS and install dependencies</a></h3>
<pre><code class="language-sh"># Update, upgrade, reboot ‼️
sudo apt update &amp;&amp; sudo apt upgrade -y &amp;&amp; reboot

# Install dependencies
sudo apt install -y make gcc build-essential git jq joe unzip
</code></pre>
<h3 id="2-install-go"><a class="header" href="#2-install-go">2. Install Go</a></h3>
<p>This way: <a href="https://go.dev/doc/install">https://go.dev/doc/install</a>. Both Go 1.20
and 1.19 are supported.</p>
<h3 id="3-clone-the-noisd-repository"><a class="header" href="#3-clone-the-noisd-repository">3. Clone the noisd repository</a></h3>
<pre><code class="language-sh">git clone https://github.com/noislabs/noisd.git
cd noisd
git checkout &lt;SOME TAG&gt;
</code></pre>
<p>The tag to be checked out is available in the <a href="node_operators/./networks.html">Networks section</a>.</p>
<h3 id="4-build-and-install-the-noisd-binary"><a class="header" href="#4-build-and-install-the-noisd-binary">4. Build and install the noisd binary</a></h3>
<pre><code class="language-sh">make install

# Add GOPATH to PATH
export PATH=&quot;$PATH:$(go env GOPATH)/bin&quot;
# in zsh: rehash
</code></pre>
<p>Check the installation:</p>
<pre><code class="language-sh">noisd version
# Shows version you checked out above
</code></pre>
<h3 id="5-init-creates-folder-homenoisd"><a class="header" href="#5-init-creates-folder-homenoisd">5. Init (creates folder $HOME/.noisd)</a></h3>
<p>Create initial configuration files. The given argument is the moniker (a
nickname for the node).</p>
<pre><code class="language-sh">noisd init &quot;random node&quot;
</code></pre>
<h3 id="6-adapt-config"><a class="header" href="#6-adapt-config">6. Adapt config</a></h3>
<pre><code class="language-sh"># Update p2p setting (config.toml)
export MY_EXTERNAL_ADDR=&quot;$(curl -sS https://api.ipify.org):26656&quot; # or set explicitely if this API does not return the correct value
sed -i 's/external_address =.*$/external_address = &quot;'$MY_EXTERNAL_ADDR'&quot;/' $HOME/.noisd/config/config.toml
</code></pre>
<h3 id="7-download-the-genesis-file"><a class="header" href="#7-download-the-genesis-file">7. Download the genesis file</a></h3>
<p>See <a href="node_operators/./networks.html">Networks</a> for the correct URL.</p>
<pre><code class="language-sh">wget -O &quot;$HOME/.noisd/config/genesis.json&quot; &lt;GENESIS URL&gt;
</code></pre>
<h3 id="8-draw-the-rest-of-the-fucking-owl"><a class="header" href="#8-draw-the-rest-of-the-fucking-owl">8. Draw the rest of the fucking owl</a></h3>
<p>The rest is similar to running a standard Cosmos node or validator. You can
check the
<a href="https://hub.cosmos.network/main/validators/validator-setup.html">Cosmos Hub docs</a>
for more details. For the faucet, rpc links, permanent peers and similar details
visit.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="status-checks"><a class="header" href="#status-checks">Status checks</a></h1>
<p>On this page you find various ways to check the status of your node.</p>
<h2 id="p2p-2"><a class="header" href="#p2p-2">p2p</a></h2>
<ol>
<li>
<p>Ensure your external address is set correctly:<br />
<code>curl -sS http://localhost:26657/status | jq .result.node_info.listen_addr</code></p>
</li>
<li>
<p>Ensure you have a few dozen peers here:<br />
<code>curl -sS http://localhost:26657/net_info | jq .result.n_peers</code></p>
</li>
<li>
<p>Ensure you have a mix of outbound and inbound peers (i.e. both outgoing and
incoming connections work:</p>
<pre><code class="language-sh"># Outbound peers
curl -sS http://localhost:26657/net_info | jq '.result.peers | map(select(.is_outbound == true)) | length'

# Inbound peers
curl -sS http://localhost:26657/net_info | jq '.result.peers | map(select(.is_outbound == false)) | length'
</code></pre>
</li>
</ol>
<h2 id="sync"><a class="header" href="#sync">Sync</a></h2>
<ol>
<li>Check your height and catching up value:<br />
<code>curl -sS http://localhost:26657/status | jq .result.sync_info</code></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="history-settings"><a class="header" href="#history-settings">History settings</a></h1>
<p>There are a few things you might want to set in yout node. Different settings
are required for different use cases, so don't consider them recommendations.</p>
<h2 id="relayer-friendly-node"><a class="header" href="#relayer-friendly-node">Relayer-friendly node</a></h2>
<p>Keep state snapshots of the last 24 hours:</p>
<pre><code class="language-sh">sed -i 's/pruning =.*$/pruning = &quot;custom&quot;/' $HOME/.noisd/config/app.toml \
  &amp;&amp; sed -i 's/pruning-keep-recent =.*$/pruning-keep-recent = &quot;34560&quot;/' $HOME/.noisd/config/app.toml \
  &amp;&amp; sed -i 's/pruning-keep-every =.*$/pruning-keep-every = &quot;0&quot;/' $HOME/.noisd/config/app.toml \
  &amp;&amp; sed -i 's/pruning-interval =.*$/pruning-interval = &quot;100&quot;/' $HOME/.noisd/config/app.toml
</code></pre>
<h2 id="dont-store-old-state"><a class="header" href="#dont-store-old-state">Don't store old state</a></h2>
<p>In order to avoid storing snapshots of the state, in
<code>$HOME/.noisd/config/app.toml</code> you can set <code>pruning = &quot;everything&quot;</code>:</p>
<pre><code class="language-sh">sed -i 's/pruning =.*$/pruning = &quot;everything&quot;/' $HOME/.noisd/config/app.toml
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="checking-cors"><a class="header" href="#checking-cors">Checking CORS</a></h1>
<p>Enabling <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> is
important to allow browser-based apps to access the APIs the same way as
non-browser based apps.</p>
<h2 id="check-cors-with-curl"><a class="header" href="#check-cors-with-curl">Check CORS with curl</a></h2>
<p>The origin <code>https://randomness.nois.network/</code> serves as an example app using the
endpoint here.</p>
<pre><code class="language-sh">export ENDPOINT=&quot;https://rpc-nois.d-stake.xyz:443&quot;

# Regular CORS request
curl -sS -I -H &quot;Origin: https://randomness.nois.network/&quot; \
  &quot;$ENDPOINT/status&quot; | grep -i &quot;access-control-&quot;

# Should return status 200 and include the response header:
# - Access-Control-Allow-Origin

# Preflight request
curl -sS -I -H &quot;Origin: https://randomness.nois.network/&quot; \
  -H &quot;Access-Control-Request-Method: POST&quot; \
  -H &quot;Access-Control-Request-Headers: X-Requested-With&quot; \
  -X OPTIONS \
  &quot;$ENDPOINT/status&quot; | grep -i &quot;access-control-&quot;

# Should return status 200 and include the response headers:
# - Access-Control-Allow-Origin
# - Access-Control-Allow-Methods
# - Access-Control-Allow-Headers


</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-systemd"><a class="header" href="#using-systemd">Using systemd</a></h1>
<p>You can run noisd as a service for systemd.</p>
<h2 id="creading-the-service-file"><a class="header" href="#creading-the-service-file">Creading the service file</a></h2>
<p>The following script creates the service file nois.service for systemd. The file
was originally provided by Kolot, thank you!.</p>
<pre><code class="language-sh">sudo tee /etc/systemd/system/nois.service &gt; /dev/null &lt;&lt;EOF
[Unit]
Description=Nois blockchain
After=network-online.target

[Service]
User=$USER
ExecStart=$(which noisd) start --home $HOME/.noisd
Restart=on-failure
RestartSec=3
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF
</code></pre>
<h2 id="using-the-nois-service"><a class="header" href="#using-the-nois-service">Using the nois service</a></h2>
<pre><code class="language-sh"># Find the new service file
sudo systemctl daemon-reload

# Check status (should be loaded, inactive and disabled)
sudo systemctl status nois

# Enable (i.e. start automatically)
sudo systemctl enable nois

# Start/Restart
sudo systemctl restart nois

# Watch logs
sudo journalctl -u nois -f -o cat

# Watch filtered logs
sudo journalctl -u nois -f -o cat --grep &quot;Ensure peers&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="validator-rewards"><a class="header" href="#validator-rewards">Validator Rewards</a></h1>
<p>Nois rewards the network's validators by allocating a 6% of the inflation to
validators in the active set. In contrast to staking rewards, every validator
receives the same amount and it is not shared with stakers. This is an attempt
to reduce concentration of voting power in a very few validators.</p>
<p>Learn how to query accumulated rewards and how to claim them.</p>
<h3 id="querying"><a class="header" href="#querying">Querying</a></h3>
<pre><code class="language-shell"># query by address
noisd q allocation claimable-rewards nois1r04t9nm22u2wfwpuffgyr8jgxs85ek0clsytvs

# query by operator address
noisd q allocation claimable-rewards noisvaloper1r04t9nm22u2wfwpuffgyr8jgxs85ek0c7sk24y
</code></pre>
<h3 id="claiming-rewards"><a class="header" href="#claiming-rewards">Claiming Rewards</a></h3>
<pre><code class="language-shell">noisd tx allocation claim-rewards --from [validator-key] \
    --chain-id  [chain-id] --gas-prices 0.25unois --gas-adjustment 1.5
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ibc-relayer"><a class="header" href="#ibc-relayer">IBC relayer</a></h1>
<blockquote>
<p>Relayers transfer packets from a chain to another via IBC. They will ship the
randomness and tokens between Nois chain and the consumer chains</p>
</blockquote>
<hr />
<p>At Nois we have two kind of relaying:</p>
<ul>
<li>ICS20 relaying: This is for token transfer between chains. (Relayers don't
recevice incentives here yet)</li>
<li>wasm relaying: This is where the randomness beacon gets requested and sent to
consumer chains. Relayers will get incentives by relaying this traffic.</li>
</ul>
<p>You can check the current IBC clients, connections and channels on
<a href="https://ibc.nois.network/connections">mainnet dashboard</a> or on the
<a href="https://testnet.ibc.nois.network/">testnet dashboard</a></p>
<p>The list of supported channels to relay on testnet is
<a href="https://docs.nois.network/node_operators/testnet_005.html#ibc-channels">testnet channels</a></p>
<p>The list of supported channels to relay on mainnet is
<a href="https://docs.nois.network/node_operators/mainnet.html#ibc-channels">mainnet channels</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ibc-wasm-relayer"><a class="header" href="#ibc-wasm-relayer">IBC wasm relayer</a></h1>
<blockquote>
<p>In this tutorial we are using the ts-relayer by confio as a relayer software.
However, feel free to use other relayer software like Hermes and if you want
to contribute to the docs by providing the steps for setting up such different
software let us know on discord</p>
</blockquote>
<hr />
<p>Setting up ts-relayer</p>
<p>Install docker from this <a href="https://docs.docker.com/engine/install/ubuntu/">link</a></p>
<h4 id="example-uni-6--nois-testnet-005-relay"><a class="header" href="#example-uni-6--nois-testnet-005-relay">Example uni-6 =&gt; nois-testnet-005 relay</a></h4>
<pre><code class="language-sh"># The mnemonic used for both chains
export RELAYER_MNEMONIC='&lt;YOUR_MNEMONIC_HERE&gt;'
# The consumer chain using Nois
export CHAIN_ID=uni-6

#Check #deployment discord channel for this value
export NOIS_PROXY=&lt;NOIS_PROXY_ADDR_ON_CONSUMER_CHAIN&gt;
#example:
#export NOIS_PROXY=juno162vdumcg626zxumvuh9u6vxcakr3rrn804dxfex8qfxnhrldl68ss0lrdn

docker run -d -e &quot;RELAYER_MNEMONIC=$RELAYER_MNEMONIC&quot; \
            noislabs/nois-relayer:$CHAIN_ID-$NOIS_PROXY-prd
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ibc-ics20-relayer"><a class="header" href="#ibc-ics20-relayer">IBC ICS20 relayer</a></h1>
<p>This refers to setting up a relayer to transfer tokens between IBC enabled
chains. As this is a standard thing, we'd rather not document it here. For more
info check this
<a href="https://tutorials.cosmos.network/hands-on-exercise/5-ibc-adv/2-relayer-intro.html">link</a></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="drand-bots"><a class="header" href="#drand-bots">Drand Bots</a></h2>
<h3 id="introduction"><a class="header" href="#introduction">Introduction</a></h3>
<p>Bots bring randomness from drand to the Nois blockchain. That's the only thing
the bot does. Once that randomness is on chain, it will be offered to Dapps
across IBC.
Bots earn incentives from bringing drand rounds that have been requested by consumer dapps.</p>
<blockquote>
<p><strong>ℹ️ Drand-bots do not and cannot generate randomness nor can they bias it. They simply relay it
from drand to the Nois chain.</strong></p>
</blockquote>
<blockquote>
<p><strong>ℹ️ Drand-bots are never slashed and do not need to put any collateral simply
because they cannot cheat.</strong></p>
</blockquote>
<blockquote>
<p><strong>⚠️ Although drand-bots cannot impact the outcome of the randomness, they can
impact the availability of the randomness by stopping to work or by failing to
submit to the Nois chain. The chain needs at least one bot to function. This is
why bot operators are incentivised and constitute a critical piece of Nois.</strong></p>
</blockquote>
<h3 id="running-a-drand-bot"><a class="header" href="#running-a-drand-bot">Running a Drand Bot</a></h3>
<p>You can run the drand bot whether on the host or in docker. The setup instructions are in the README of this <a href="https://github.com/noislabs/bot2/tree/main">repository</a>.</p>
<h3 id="performance-factors-of-drand-bots"><a class="header" href="#performance-factors-of-drand-bots">Performance Factors of Drand Bots</a></h3>
<p>the main criteria in running a fast drand-bot is being able to broadcast your tx
as fast as possible in order to reach the proposer's node asap before the other
drand-bots. this will allow your submission tx to be placed among the first 6
bots in the mempool of the proposer's node. Obviously you need a good cpu and a
fast connection that is very close to an rpc node. Your rpc node needs to be
fast in the network and eventually needs to have fast direct peers so it can
reach the proposer before the competitor drand-bot operators. Choosing an rpc
node that is heavily used or that many other bot operators are using would not
be optimal. Using an rpc that has big voting power can slightly increase your
chances because that node gets chosen to propose blocks a bit more often than
other validator nodes so sometimes you get that small advantage when your RPC is
the block proposer. But this is a very small difference and often validator
nodes do not offer an rpc endpoint. In general if you get like +3 second delay
it is not because your bot submitted the tx 3 seconds later than the other
drand-bots but because they were few ms before you so the proposer did not
choose to select you in the proposed block because there is a consensus
blockspace that only allows 4-5 submissions. so your submission becomes leftover
for the next block (in 3 seconds) and if you also miss the second block because
there are more than 10 operators faster than your drand-bot. then your
submission only gets included in the block afterwards so +6seconds.</p>
<h3 id="check-submissions"><a class="header" href="#check-submissions">Check Submissions</a></h3>
<p>In order to check the submissions you can visit this Nois randomness
<a href="https://randomness.nois.network/">dashboard</a>
<img src="img/randomness_dashboard.jpg" alt="Dashboard" /> This tools shows randomness that was
verified on the Nois blockchain. The source of randomness is drand, a
decentralized random number generator which produces a so called &quot;random beacon&quot;
every 3 seconds. Beacons are submitted as transaction to Nois by off-chain bots.
Since beacons are cryptographically signed by drand, bots cannot influence the
randomness. A strong and diverse set of bot operator makes the submission of
beacons fast and relyable. Bots are incentivised for submissions. They receive a
rewards if they are registered and allow-listed.</p>
<div class="table-wrapper"><table><thead><tr><th>Badge Color</th><th>Description</th></tr></thead><tbody>
<tr><td>Green</td><td>Bot received a reward</td></tr>
<tr><td>Red</td><td>Bot is registered but did not receive a reward</td></tr>
<tr><td>Gray</td><td>Bot is not eligible for a reward</td></tr>
</tbody></table>
</div>
<h5 id="check-if-your-bot-is-allowlisted"><a class="header" href="#check-if-your-bot-is-allowlisted">Check if your bot is allowlisted</a></h5>
<ul>
<li>Navigate to the randomness <a href="https://randomness.nois.network/">dashboard</a></li>
<li>On the top right of the page click on info
<img src="img/randomness_dashboard_info.jpg" alt="Info" /></li>
<li>Scroll down and check the allowlisted addresses</li>
</ul>
<h3 id="incentive-system"><a class="header" href="#incentive-system">Incentive System</a></h3>
<p>Drand bots earn incentives by submitting randomness to Nois.
A bot gets an incentive if and only if
They are among the fastest
AND
they are allowlisted
AND
The randomness round has been requested by a dapp</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="add-randomness-to-your-chain"><a class="header" href="#add-randomness-to-your-chain">Add Randomness to your Chain</a></h2>
<p>In order to be able to integrate Nois within your blockchain you need to deploy
a nois-proxy which plays the role of an outpost contract. Good news, Nois can be
integrated with any IBC enabled chain and the process is fully permissionless.
The nois-proxy's role when deployed to your chain is to abstract the IBC
complexity out of the randomness consumer DAPP.</p>
<h4 id="steps-to-integrate-nois-to-your-chain"><a class="header" href="#steps-to-integrate-nois-to-your-chain">Steps to integrate Nois to your chain</a></h4>
<h4 id="decide-on-a-nois-proxy-strategy"><a class="header" href="#decide-on-a-nois-proxy-strategy">Decide on a nois-proxy strategy</a></h4>
<p>The nois-proxy that you will deploy belongs to you and not to the Nois chain.
Your nois-proxy will have a nois-payment contract at the Nois chain so it can
pay for randomness. You need to decide how much dapps need to pay your proxy in
prder for the proxy to forward the request to Nois. You can set this price in
IBCed NOIS or you can even set the native token of your chain, or even Bitcoin.
You cannot set the price of the proxy for free but you can set it extremely low
like 1ujuno. If you still want to offer it for free you can fork the proxy code
and make it free. Just remember that if you set the price too low some
people/dapps can request the randomness from your proxy for a cheap price and
end up consuming you $NOIS tokens at the other side (from you nois-payment
contract on Nois chain) You are the manager of your proxy so you can at any
point in time withdraw part or all the funds that your proxy has accumulated.
You can make your proxy part of governance and withdraw the funds to the
community pool if you wish. Proxies that use Nois frequently will get in version
0.14.0 discounts. This is not deployed yet but when it will. proxy operators can
make money out of the proxying business. This
<a href="https://scripta.network/@noislabs/ccc968a7-991a-4eef-a603-725c814fe6c7">article</a>
can help you better understand how the traffic between nois and a consumer chain
work</p>
<p><img src="img/nois-proxy.png" alt="Proxy" /></p>
<h5 id="connect-your-chain-to-nois"><a class="header" href="#connect-your-chain-to-nois">Connect your chain to Nois</a></h5>
<p>By the end of this step you should have an IBC transfer channel between your
Chain and Nois, so that you can pay for randomness with NOIS.</p>
<ul>
<li>Configure your relayer software (hermes, go-relayer, ts-relayer) to have Nois
and your chain (Check the
<a href="https://github.com/cosmos/chain-registry/tree/master/nois">chain-registry</a>
for the details)</li>
<li>Create a Client, a connection, and a transfer channel between both chains.</li>
<li>Check that the channel has been created. You can do so in this IBC
<a href="https://ibc.nois.network/connections">mainnet dashboard</a> or
<a href="https://testnet.ibc.nois.network/">testnet dashboard</a></li>
<li>Start the relayer and IBC transfer 1 NOIS from Nois chain to your chain and
check the balance (on destination account) in order to get the IBCed NOIS
denom. write down the IBC denom as you will need this for a later step.</li>
</ul>
<h5 id="install-the-binary-of-your-chain"><a class="header" href="#install-the-binary-of-your-chain">Install the binary of your chain</a></h5>
<p>For this step you can check the docs for your IBC chain. and atthe end of this
step you should be able to run the chain binary. Example:</p>
<pre><code class="language-sh">junod version
</code></pre>
<h5 id="navigate-to-the-nois-contract-releases-link"><a class="header" href="#navigate-to-the-nois-contract-releases-link">Navigate to the Nois contract releases link</a></h5>
<p>navigate to this <a href="https://github.com/noislabs/nois-contracts/releases">link</a> and
you should find a list of releases. scroll to the latest version and expand the
list of artifacts/assets then click and download <strong>nois_proxy.wasm</strong></p>
<h5 id="store-the-nois-proxy-contract-code"><a class="header" href="#store-the-nois-proxy-contract-code">Store the nois-proxy contract code</a></h5>
<pre><code class="language-sh">junod tx wasm store \
       nois_proxy.wasm* \
       --from &lt;your-key&gt; \
       --chain-id uni-6 \
       --gas=auto \
       --gas-adjustment 1.4  \
       --gas-prices 0.025ujunox \
       --broadcast-mode=block \
       --node=https://rpc.uni.juno.deuslabs.fi:443 -y
</code></pre>
<h5 id="instantiate-the-nois-proxy-contract-on-your-chain"><a class="header" href="#instantiate-the-nois-proxy-contract-on-your-chain">instantiate the nois-proxy contract on your chain</a></h5>
<p>The Proxy contract is what will send requests for randomness to Nois Chain via
IBC. It will be the central source of randomness that dapps on your chain can
send requests to.</p>
<p><img src="img/proxy-1.png" alt="Request beacons" /> <img src="img/proxy-2.png" alt="Receive beacons" /></p>
<p>instantiation paramaters description:</p>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Description</th><th>Type</th></tr></thead><tbody>
<tr><td>manager</td><td>You can put your address here. <br>It will allow you to set the proxy config parameters and withdraw any funds held/made by the proxy</td><td>String</td></tr>
<tr><td>prices</td><td>This field will determine how much Dapps need to pay your Proxy Contract when they request randomness. You can set this to whatever denoms and amount you like. When you set multiple denoms they are evaluated with an OR so setting the prices to [1NOIS, 1JUNO] means the dapp needs to pay 1 NOIS OR 1JUNO. For example, if you're using a Payment Mode of mode::IbcPay, you might want to do something like this:</td><td></td></tr>
</tbody></table>
</div>
<p>Set Prices to 2 NOIS vec![coin(&quot;unois&quot;, 55_000_000u32)] For each request a Dapp
sends to your Proxy Contract, your Proxy Contract sends 1 NOIS to the gateway
for Nois fees, and you profit 5 NOIS for your service!.<br>Setting this to an
empty list will not make the proxy price free but will stop the contract from
accepting incoming beacon requests. It can be a way to stop the proxy from
serving randomness <br>Please note that these are not the funds that will be
sent over to Nois but only the proxy for the fee. | Vec&lt;Coin&gt; | | test_mode |
Just set this to false. This is only set to true for integration testing |
Boolean | | callback_gas_limit | The amount of gas that the callback to the dapp
can consume. <br>500000 is a good value if you are not sure. | number | | mode |
This defines the operational mode of the proxy:<br>two modes are available:
<br> - <strong>Funded</strong>: In this mode you will need to manually make sure that the
Nois Payment contract (on Nois Chain) always has enough NOIS tokens to process
requests. (Each request costs 1 NOIS). You can think of your Payment Contract
as your &quot;Balance Sheet&quot; or like a &quot;Prepaid Nois Gift Card&quot;.<br> - <strong>IbcPay</strong>: In
this mode the proxy contract sends IBCed NOIS to the gateway for each beacon
request. You need to whether prefill this contract with NOIS or make sure you
set the Nois fee on the prices field so that DAPPs will send the fee upon
request. | Enum |</p>
<h4 id="nois-proxy-modes-explained"><a class="header" href="#nois-proxy-modes-explained">Nois-proxy modes explained</a></h4>
<ul>
<li>Funded <img src="img/proxy-funded.png" alt="Funded" /></li>
<li>IbcPay <img src="img/proxy-ibcpay.png" alt="Receive beacons" /></li>
</ul>
<pre><code class="language-sh">junod tx wasm instantiate &lt;CODE_ID&gt;
  '{&quot;manager&quot;:YOUR_ADDRESS_HERE,
  &quot;prices&quot;:
         [
             {&quot;denom&quot;:&quot;ujunox&quot;,&quot;amount&quot;:&quot;1000000&quot;},
             {&quot;denom&quot;:&quot;ibc/..ibc_NOIS_you_noted_in_a_previous_step&quot;,&quot;amount&quot;:&quot;1000000&quot;}
         ],
  &quot;callback_gas_limit&quot;:500000,
  &quot;test_mode&quot;:false,
  &quot;mode&quot;:{&quot;ibc_pay&quot;:{
         &quot;unois_denom&quot;:{
               &quot;ics20_channel&quot;:&quot;channel-xx&quot;,
               &quot;denom&quot;:&quot;ibc/..ibc_NOIS_you_noted_in_a_previous_step&quot;
               }
 }}}'
--label=nois-proxy
--from &lt;your-key&gt;
--chain-id uni-6
--gas=auto
--gas-adjustment 1.4
--gas-prices 0.025ujunox
--broadcast-mode=block
--node=https://rpc.uni.juno.deuslabs.fi:443 -y
</code></pre>
<h5 id="setup-the-ibc-channel-for-the-wasm-relay---transferring-the-randomness-beacon-not-the-tokens"><a class="header" href="#setup-the-ibc-channel-for-the-wasm-relay---transferring-the-randomness-beacon-not-the-tokens">Setup the IBC channel for the wasm relay - Transferring the randomness beacon not the tokens</a></h5>
<ul>
<li>choose your relayer software (ts-relayer or hermes or go-relayer).</li>
<li>You can create a new IBC client and connection or skip if you want to use the
existing connection (the one that has been created for the token transfer).</li>
<li>Create an IBC channel where the source is the nois-proxy you have just
instantiated on your chain and the destination is the nois-gateway on the Nois
chain (the direction is important). When creating the channel Make sure to use
the wasm port.
<blockquote>
<p>ℹ️ If the nois-gateway address is
nois1x55xhexprdwfl6nfju53hfxj77nsxlj5c9jzyvjuastl9f3dt6jsx6l9yg then the
port will be
<strong>wasm</strong>.nois1x55xhexprdwfl6nfju53hfxj77nsxlj5c9jzyvjuastl9f3dt6jsx6l9yg</p>
</blockquote>
</li>
<li>Upon channel connection/creation the nois-gateway factory creates a payment
contract for your proxy on the Nois chain. This payment contract will be your
balance sheet. So long as the payment contract has enough balance your proxy
will be able to request randomness beacon. So make sure the payment contract
does not run out of $NOIS.</li>
<li>Check that the channel has been created. You can do so in this IBC
<a href="https://ibc.nois.network/connections">mainnet dashboard</a> or
<a href="https://testnet.ibc.nois.network/">testnet dashboard</a></li>
<li>Run the relayer and ask others to run their relayers aswell.</li>
<li>If the proxy mode is on IbcPay make sure to fill the proxy with IBCed NOIS
tokens. (every beacon request will consume $1 NOIS). else if the proxy is on
Funded mode then make sure the payment contract is filled with NOIS tokens.</li>
<li>For performance reasons when using IbcPay mode, it is a good idea to have some
initial 1 $NOIS on the payment, this allows to gateway to process the beacon
even when the ibc token transfer is slower than the beacon request wasm
packet.</li>
<li>If you need some NOIS tokens for your payment contract you can contact us on
discord and describe your usecase so that we give you a NOIS grant</li>
<li>Congrats 🎉 you can use the proxy on your Dapp to get randomness. You can
follow <em>use_nois_randomness</em> page for more details.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="step-by-step-guide-to-randdrop"><a class="header" href="#step-by-step-guide-to-randdrop">Step By Step Guide to Randdrop</a></h1>
<p>First things first, a randdrop is simply an airdrop with a final touch of
randomness to it. Meaning that not all preeligible wallets will get tokens but
only a random subset that will earn a larger portion of airdrop.</p>
<p>This randdrop aproach is used by Nois to airdrop NOIS tokens to other IBC
blockchains but also any other protocol wishing to make a randdrop using Nois
instead of a standard airdrop can follow this guide to randrop their tokens to
some community.</p>
<h2 id="how-it-works-1"><a class="header" href="#how-it-works-1">How it works</a></h2>
<p>A randdrop contract gets instantiated in any wasm-ibc chain (i.e the chain to
airdrop tokens to). The operator takes a snapshot of the chain in order to get a
state in time with the addresses to airdrop to with the respective amounts. This
snapshot is pretty much a json file like this
<a href="https://gist.github.com/kaisbaccour/5a2f102ef476d533a3112b016aa45db4">file</a>.
Then you merkelise the file(a tree of cryptographic hashes), and feed the merkle
root to the randdrop contract. Then the operator (person who is in charge of
managing the airdrop) communicates the file to the community (twitter for
example). Users can participate for a chance to win by checking the public json
file containing what addresses are pre-eligible, compute their merkle proof (the
webapp UI does that for them) and send the proof to the randdrop contract which
request a random beacon from Nois. Upon reception of the randomness, an account
has 1/3 of probability to receive the randdrop. This is interesting because it
allows protocols to target with their airdrop a bigger number of
communities/networks without diluting as much the airdrop amount per account.</p>
<h3 id="why-merkle-trees"><a class="header" href="#why-merkle-trees">Why Merkle trees</a></h3>
<p>We aimed for a merkle randdrop because it is more elegant, cost efficient, safer
and not spammy. When doing merkle randdrop you don't send tokens to all wallets,
instead users who are interested will come to claim your token. This is good for
many reasons:</p>
<ul>
<li>Legals: Companies in certain countries don't have to justify this token that
they didn't even want to claim.</li>
<li>Gas fees: Users will claim their tokens so the operator doesn't have to spend
a big amount to airdrop to all these users</li>
<li>performance and efficiency: The computation is done offchain on the browser of
the user to calculate the merkle proof, and the contract doens't have to hold
the data containing who gets what airdrop, instead the contract only holds the
merkle root which is just a small hash.</li>
<li>No waste: Tokens that are not claimed can be used for another airdrop to other
community users who want it. so you can targer a larger community</li>
</ul>
<h3 id="why-randdrop-not-airdrop"><a class="header" href="#why-randdrop-not-airdrop">Why randdrop not airdrop</a></h3>
<ul>
<li>With randdrop you can target even larger communities without diluting as much
the claimed token. because a smaller subset withing a community gets a larger
amount.</li>
<li>It is more fun when there is the surprise effect.</li>
</ul>
<h2 id="step-by-step"><a class="header" href="#step-by-step">Step by Step</a></h2>
<ul>
<li>You need to export and process the snapshot</li>
<li>you need to deploy the contract</li>
</ul>
<p>You can find the details for each step in the next pages</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="randdrop-snapshot"><a class="header" href="#randdrop-snapshot">Randdrop Snapshot</a></h1>
<h3 id="export-the-snapshot"><a class="header" href="#export-the-snapshot">Export the snapshot</a></h3>
<p>The goal of this step is to get a list of addresses to make eligible for the
randdrop. In this example we're going to airddrop to juno-1 network delegators</p>
<ul>
<li>First you need to install junod</li>
<li>Run and sync a junod node</li>
<li>make a snapshot (i.e get the state ofthe chain at a specific height). ps: I
did this step with 60GB of memory (RAM+SWAP) and it can take few hours
tofinish</li>
</ul>
<pre><code class="language-sh">junod export --height 8372000  &gt; juno-8372000.json
</code></pre>
<p>This step will leave you with a big <strong>juno-8372000.json</strong> file that contains all
the state. Let's filter it out to get only the juno stakers.</p>
<h3 id="process-the-snapshot"><a class="header" href="#process-the-snapshot">Process the snapshot</a></h3>
<p>Get the stakers list</p>
<pre><code class="language-sh">cat juno-8372000.json \
| jq '[.app_state.staking.delegations | group_by(.delegator_address) | map({address: .[0].delegator_address, amount: (map(.shares | tonumber) | add)})][0]' \
| jq 'sort_by(-.amount)' \
&gt; juno-8372000-stakers.json
</code></pre>
<p>now we are left with this <strong>juno-8372000-stakers.json</strong>
<a href="https://gist.githubusercontent.com/kaisbaccour/fb33926ffd88f8169ba9135e413330e2/raw/9c1d839fa56d9b92997fdf56aa31ce53643dae66/juno-8372000-stakers.json">file</a>
that holds juno stakers and the amount they have staked at block height
<strong>8372000</strong>.</p>
<p>We want to filter out accounts that have less than $4USD (at the time of
writing juno is worth $0.5 so let's filter out all wallets with less than 8juno
staked). Also there might be wallets with huge amounts, let's say that we want
to make a max cap on $40K airddrop so wallets with $40K staked or more will get
the same amount</p>
<pre><code class="language-sh">cat juno-8372000-stakers.json \
|jq '[.[] | select(.amount &gt;= 8000000)]' \
| jq 'map(if .amount &gt; 80000000000 then .amount = 80000000000 else . end)'  \
&gt; juno-8372000-stakers-between-8-and-80K.json
</code></pre>
<p>This leaves us with a <strong>juno-8372000-stakers-between-8-and-80K.json</strong> json
<a href="https://gist.githubusercontent.com/kaisbaccour/963ecaa271796f914cc3d6db7b83369b/raw/6e47adf89d097cedbc94e1f9d0ba7b444e40156b/juno-8372000-stakers-between-8-and-80K.json">file</a>.</p>
<p>Now the amounts are in juno so you might wanna multiply them by how much you
want to give on your airdrop token per ujuno.</p>
<p>In this case, we want to airdrop 2,6M NOIS to juno chain. This means we want to
airdrop <strong>0.07340892389</strong> unois per ujuno</p>
<p>To calculate the conversion rate you might want to check the total amount of the staked token</p>
<pre><code class="language-sh">cat juno-8372000-stakers-between-8-and-80K.json | jq '[.[].amount] | add'
</code></pre>
<p>Then divide the total amount you want to randdrop by the total amount staked.
Let's say the total juno staked amount was 35M and we want to distribute 2.6M, CONVERSION_RATE=2.6M/35M</p>
<p>Once you figure out what conversion rate to apply you can extract the final json file in the token  you want to randdrop</p>
<pre><code class="language-sh"> export CONVERSION_RATE=0.07340892389
 cat juno-8372000-stakers-between-8-and-80K.json \
 | jq --argjson multiplier $CONVERSION_RATE 'map(if .amount | type == &quot;number&quot;   then .amount |= (. * $multiplier | floor)  else .  end)' \
 &gt; juno-randdrop.json
</code></pre>
<p>This will leave us with the final <strong>juno-randdrop.json</strong>
<a href="https://gist.githubusercontent.com/kaisbaccour/5a2f102ef476d533a3112b016aa45db4/raw/aa94b4d6682536ac518d1e98367b6bbc0eac5740/juno-randdrop.json">file</a>
to communicate and merkelise in the next section</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deploying-the-randdrop"><a class="header" href="#deploying-the-randdrop">Deploying the randdrop</a></h1>
<h3 id="generate-the-merkle-root"><a class="header" href="#generate-the-merkle-root">Generate the merkle root</a></h3>
<pre><code class="language-sh"> merkle-airdrop-cli generateRoot --file juno-randdrop.json
</code></pre>
<p>Ouptut: 73d8ae84dddb8f99f08ecf141d0fb7d65fe8af7a2e4aeb7d6714f985d945851f</p>
<h3 id="make-sure-nois-is-connected-tou-your-chain"><a class="header" href="#make-sure-nois-is-connected-tou-your-chain">Make sure Nois is connected tou your chain</a></h3>
<p>Check if there is a nois-proxy already on your chain to use it for the
randomness. If there is no proxy you can create one yourself by following the
#integrate_nois_to_your_chain_section in these docs. If you have a nois-proxy
you can go ahead and move to the next step</p>
<h3 id="compile-store-and-instantiate-the-randdrop-contract"><a class="header" href="#compile-store-and-instantiate-the-randdrop-contract">compile, store and instantiate the randdrop contract</a></h3>
<pre><code class="language-sh"># This repo contains nois example contracts including the randdrop contract
 git clone https://github.com/noislabs/nois-dapp-examples
 cd nois-contracts
</code></pre>
<p>Compile</p>
<pre><code class="language-sh"># This command will generate wasm files
 devtools/build_integration_wasm.sh
</code></pre>
<p>Make sure that you have now a wasm file in this path</p>
<pre><code class="language-sh">ls target/wasm32-unknown-unknown/release/nois_airdrop.wasm
</code></pre>
<p>Store</p>
<pre><code class="language-sh">junod tx wasm store target/wasm32-unknown-unknown/release/randdrop.wasm   \
--from deployment-key \
--chain-id=uni-6  \
--gas-prices 0.025ujunox \
--gas=auto --gas-adjustment 1.4  \
--broadcast-mode=block --node=https://rpc.uni.junonetwork.io:443
</code></pre>
<p>Instantiate</p>
<pre><code class="language-sh">junod tx wasm instantiate2 1935 \
'{&quot;manager&quot;:&quot;juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2&quot;, &quot;nois_proxy_address&quot;:&quot;juno1pjpntyvkxeuxd709jlupuea3xzxlzsfq574kqefv77fr2kcg4mcqvwqedq&quot;,&quot;nois_proxy_denom&quot;:&quot;ibc/717352A5277F3DE916E8FD6B87F4CA6A51F2FBA9CF04ABCFF2DF7202F8A8BC50&quot;,&quot;nois_proxy_amount&quot;:&quot;50000000&quot;,&quot;randdrop_denom&quot;:&quot;ibc/717352A5277F3DE916E8FD6B87F4CA6A51F2FBA9CF04ABCFF2DF7202F8A8BC50&quot;,&quot;merkle_root&quot;:&quot;73d8ae84dddb8f99f08ecf141d0fb7d65fe8af7a2e4aeb7d6714f985d945851f&quot;, &quot;test_mode&quot;:true}' 01 \
--label=randdrop --admin juno1q6yvx8lxpheqflkcl0qf89czej4akrsfzc6xs2 -\
-from deployment-key \
--chain-id uni-6 \
--gas=auto --gas-adjustment 1.2 --gas-prices=0.025ujunox \
--broadcast-mode=block --node=https://rpc.uni.junonetwork.io:443
</code></pre>
<h3 id="send-the-tokens-to-airdrop-to-the-contract"><a class="header" href="#send-the-tokens-to-airdrop-to-the-contract">Send the tokens to airdrop to the contract</a></h3>
<p>The before the claiming can start you need to send the tokens to airdrop to the
contract. Otherwise the contract won't be able to give the tokens to users that
want to claim the randdrop</p>
<h3 id="claiming-phase"><a class="header" href="#claiming-phase">Claiming phase</a></h3>
<h4 id="claim-from-the-cli"><a class="header" href="#claim-from-the-cli">Claim from the cli</a></h4>
<p>Calculate the merkle proof from the</p>
<ul>
<li><strong>juno-8372000-stakers-between-8-and-80K.json</strong> json
<a href="https://gist.githubusercontent.com/kaisbaccour/963ecaa271796f914cc3d6db7b83369b/raw/6e47adf89d097cedbc94e1f9d0ba7b444e40156b/juno-8372000-stakers-between-8-and-80K.json">file</a></li>
<li>The address that will claim (needs to be in the file)</li>
<li>the amount that the address holds (needs to match what's on the file )</li>
</ul>
<pre><code class="language-sh">merkle-airdrop-cli generateProofs \
--file juno-randdrop.json \
--address juno1etltrk88jyye62lynfd8e8zhnu0lxd9udsk8fc \
--amount 74711941
</code></pre>
<p>Output:</p>
<pre><code class="language-sh">[
  'c683e9ab4d7cffc52606aa3ee171d124ae9a57f05e351e6e2603dfce436487dc',
  'ad23cc14faa5ac312e9d0ce8556adf2eec04aee3cb3c70c33bbb110e55c02da4',
  '80101b58bd9ed6b38a96030ab786dd3e57fa4c54a0c719871239c731e4f3e452',
  '8173ef4c7a10f807526d1c98d9dc3f31c1e1573d91e1a277f0d2402ae9f2a5a6',
  '1a8f1619448c2c5968c4f58cd78fe6fc3dba749de36c13f45ac8d541ae192d20',
  'a5f77a7ce77940a5f68af5ffe3992532d6178f23fdbc1238f5f84fab5cfa7243',
  'a7a1fdeea81e9a4b1a6b58703cc1da3f2dd1ae309734b69bd1caa00e321ee247',
  '477a2f2885e39be7a0c76c4a766c5ffa6a28bae066b58bbb868f9f008e6c4899',
  '50b409286902a470c10d1aac1014182606a587033a120cc71d49ea9974123bc3',
  '723f2b84752aae6f6243f54627d88169bcea8fa9d233accce2779bcab0d6cbfa',
  '3f1dca55c55b0feab7d40629d20e3f4a90dc908d129b628eff4a99219ca0782d',
  '49de319f3d929c6c7e6fd247bd84db8519d45b947afe92d0f7866a6d3fbf6d16',
  'a10acecae9b1c8dc795dee423f56fcc457a6f8ab567c0070eb33b4a6ed5913e2',
  'bda76c1358d096c74780011ebafc99b1af58ed51ee258a4013dd17b90240f63b',
  '471a3872ad818e02be2145a90d9558601311f88ecf556383c4b017627007c7b2',
  '669627ae91df85a1e236fee0b1ae2d65256d471e0307f34215574f54f6e26b8a',
  'e004b23a35d1994359a27f225cf2024f59325e24f4667c7bd6a2230c97d5e3bd'
]
</code></pre>
<p>Participate in the randdrop by providing the proof</p>
<pre><code class="language-sh">junod tx wasm execute juno14tfzmpl6kw2e6lyqzsvjgcqu7a9jhsneu0u4nvdv6znulps6xufqwlw2xf \
  '{&quot;participate&quot;:{&quot;amount&quot;:&quot;74711941&quot;,&quot;proof&quot;:[&quot;c683e9ab4d7cffc52606aa3ee171d124ae9a57f05e351e6e2603dfce436487dc&quot;,&quot;ad23cc14faa5ac312e9d0ce8556adf2eec04aee3cb3c70c33bbb110e55c02da4&quot;,&quot;80101b58bd9ed6b38a96030ab786dd3e57fa4c54a0c719871239c731e4f3e452&quot;,&quot;8173ef4c7a10f807526d1c98d9dc3f31c1e1573d91e1a277f0d2402ae9f2a5a6&quot;,&quot;1a8f1619448c2c5968c4f58cd78fe6fc3dba749de36c13f45ac8d541ae192d20&quot;,&quot;a5f77a7ce77940a5f68af5ffe3992532d6178f23fdbc1238f5f84fab5cfa7243&quot;,&quot;a7a1fdeea81e9a4b1a6b58703cc1da3f2dd1ae309734b69bd1caa00e321ee247&quot;,&quot;477a2f2885e39be7a0c76c4a766c5ffa6a28bae066b58bbb868f9f008e6c4899&quot;,&quot;50b409286902a470c10d1aac1014182606a587033a120cc71d49ea9974123bc3&quot;,&quot;723f2b84752aae6f6243f54627d88169bcea8fa9d233accce2779bcab0d6cbfa&quot;,&quot;3f1dca55c55b0feab7d40629d20e3f4a90dc908d129b628eff4a99219ca0782d&quot;,&quot;49de319f3d929c6c7e6fd247bd84db8519d45b947afe92d0f7866a6d3fbf6d16&quot;,&quot;a10acecae9b1c8dc795dee423f56fcc457a6f8ab567c0070eb33b4a6ed5913e2&quot;,&quot;bda76c1358d096c74780011ebafc99b1af58ed51ee258a4013dd17b90240f63b&quot;,&quot;471a3872ad818e02be2145a90d9558601311f88ecf556383c4b017627007c7b2&quot;,&quot;669627ae91df85a1e236fee0b1ae2d65256d471e0307f34215574f54f6e26b8a&quot;,&quot;e004b23a35d1994359a27f225cf2024f59325e24f4667c7bd6a2230c97d5e3bd&quot;]}}'\
    --from main \
    --chain-id uni-6 \
    --gas=auto --gas-adjustment 1.4 --gas-prices=0.025ujunox \
    --broadcast-mode=block \
    --node=https://rpc.uni.junonetwork.io:443
</code></pre>
<p>As soon as the randomness is published the relayer will trigger the contract and
give the winner participant their airdrop</p>
<h4 id="claim-from-the-ui"><a class="header" href="#claim-from-the-ui">Claim from the UI</a></h4>
<p>We can't expect every user to use the cli to claim their randdrop so you can
just use a UI like <a href="https://github.com/noislabs/randdrop-ui">Nois randdrop UI</a>
to get the address from keplr, check the randdrop eligibility, computes the
merkle proof and executes the contract to claim the randdrop</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
