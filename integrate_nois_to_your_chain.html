<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bring Nois to your Chain - Nois Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title.html">Nois Documentation</a></li><li class="chapter-item expanded "><a href="general.html"><strong aria-hidden="true">1.</strong> General</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="what_is_nois.html"><strong aria-hidden="true">1.1.</strong> What is Nois</a></li><li class="chapter-item expanded "><a href="how_it_works.html"><strong aria-hidden="true">1.2.</strong> How it works</a></li><li class="chapter-item expanded "><a href="drand.html"><strong aria-hidden="true">1.3.</strong> Drand</a></li><li class="chapter-item expanded "><a href="use_cases.html"><strong aria-hidden="true">1.4.</strong> Use-cases</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">1.5.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="links.html"><strong aria-hidden="true">1.6.</strong> Links</a></li></ol></li><li class="chapter-item expanded "><a href="for_token_holders_and_investors.html"><strong aria-hidden="true">2.</strong> For token holders and investors</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="how_to_stake.html"><strong aria-hidden="true">2.1.</strong> How to stake</a></li></ol></li><li class="chapter-item expanded "><a href="dapp_devs/use_nois_randomness.html"><strong aria-hidden="true">3.</strong> For Dapp developers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dapp_devs/contract_implementation.html"><strong aria-hidden="true">3.1.</strong> Contract Implementation</a></li><li class="chapter-item expanded "><a href="dapp_devs/interacting_with_a_dapp.html"><strong aria-hidden="true">3.2.</strong> Interacting with a Dapp</a></li><li class="chapter-item expanded "><a href="dapp_devs/nois_toolbox.html"><strong aria-hidden="true">3.3.</strong> Nois Toolbox</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="dapp_devs/toolbox_in_rust.html"><strong aria-hidden="true">3.3.1.</strong> Toolbox in Rust</a></li><li class="chapter-item expanded "><a href="dapp_devs/toolbox_in_js.html"><strong aria-hidden="true">3.3.2.</strong> Toolbox in js</a></li></ol></li><li class="chapter-item expanded "><a href="dapp_devs/video_tutorial.html"><strong aria-hidden="true">3.4.</strong> Video Tutorial</a></li><li class="chapter-item expanded "><a href="dapp_devs/dev_faq.html"><strong aria-hidden="true">3.5.</strong> Developer Questions</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/index.html"><strong aria-hidden="true">4.</strong> For Node operators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/networks.html"><strong aria-hidden="true">4.1.</strong> Networks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/mainnet.html"><strong aria-hidden="true">4.1.1.</strong> Mainnet</a></li><li class="chapter-item expanded "><a href="node_operators/testnet_005.html"><strong aria-hidden="true">4.1.2.</strong> Testnet 005</a></li><li class="chapter-item expanded "><a href="node_operators/faucet.html"><strong aria-hidden="true">4.1.3.</strong> Faucet</a></li><li class="chapter-item expanded "><a href="checksums.html"><strong aria-hidden="true">4.1.4.</strong> Contract checksums</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/run_a_node.html"><strong aria-hidden="true">4.2.</strong> Run a node</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/status_checks.html"><strong aria-hidden="true">4.2.1.</strong> Status Checks</a></li><li class="chapter-item expanded "><a href="node_operators/history.html"><strong aria-hidden="true">4.2.2.</strong> History settings</a></li><li class="chapter-item expanded "><a href="node_operators/cors.html"><strong aria-hidden="true">4.2.3.</strong> CORS</a></li><li class="chapter-item expanded "><a href="node_operators/systemd.html"><strong aria-hidden="true">4.2.4.</strong> Using Systemd</a></li><li class="chapter-item expanded "><a href="validator_rewards.html"><strong aria-hidden="true">4.2.5.</strong> Validator Rewards</a></li></ol></li><li class="chapter-item expanded "><a href="node_operators/relayer.html"><strong aria-hidden="true">4.3.</strong> Relayer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="node_operators/wasm_relayer.html"><strong aria-hidden="true">4.3.1.</strong> wasm-Relayer</a></li><li class="chapter-item expanded "><a href="node_operators/ics20_relayer.html"><strong aria-hidden="true">4.3.2.</strong> ICS20-Relayer</a></li></ol></li><li class="chapter-item expanded "><a href="drand_bots.html"><strong aria-hidden="true">4.4.</strong> Drand Bots</a></li></ol></li><li class="chapter-item expanded "><a href="integrate_nois_to_your_chain.html" class="active"><strong aria-hidden="true">5.</strong> Bring Nois to your Chain</a></li><li class="chapter-item expanded "><a href="randdrop.html"><strong aria-hidden="true">6.</strong> Make a random airdrop for your project</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nois Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/noislabs/docs2" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/noislabs/docs2/edit/main/src/integrate_nois_to_your_chain.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="add-randomness-to-your-chain"><a class="header" href="#add-randomness-to-your-chain">Add Randomness to your Chain</a></h2>
<p>In order to be able to integrate Nois within your blockchain you need to deploy
a nois-proxy which plays the role of an outpost contract. Good news, Nois can be
integrated with any IBC enabled chain and the process is fully permissionless.
The nois-proxy's role when deployed to your chain is to abstract the IBC
complexity out of the randomness consumer DAPP.</p>
<h4 id="steps-to-integrate-nois-to-your-chain"><a class="header" href="#steps-to-integrate-nois-to-your-chain">Steps to integrate Nois to your chain</a></h4>
<h4 id="decide-on-a-nois-proxy-strategy"><a class="header" href="#decide-on-a-nois-proxy-strategy">Decide on a nois-proxy strategy</a></h4>
<p>The nois-proxy that you will deploy belongs to you and not to the Nois chain.
Your nois-proxy will have a nois-payment contract at the Nois chain so it can
pay for randomness. You need to decide how much dapps need to pay your proxy in
prder for the proxy to forward the request to Nois. You can set this price in
IBCed NOIS or you can even set the native token of your chain, or even Bitcoin.
You cannot set the price of the proxy for free but you can set it extremely low
like 1ujuno. If you still want to offer it for free you can fork the proxy code
and make it free. Just remember that if you set the price too low some
people/dapps can request the randomness from your proxy for a cheap price and
end up consuming you $NOIS tokens at the other side (from you nois-payment
contract on Nois chain) You are the manager of your proxy so you can at any
point in time withdraw part or all the funds that your proxy has accumulated.
You can make your proxy part of governance and withdraw the funds to the
community pool if you wish. Proxies that use Nois frequently will get in version
0.14.0 discounts. This is not deployed yet but when it will. proxy operators can
make money out of the proxying business. This
<a href="https://scripta.network/@noislabs/ccc968a7-991a-4eef-a603-725c814fe6c7">article</a>
can help you better understand how the traffic between nois and a consumer chain
work</p>
<p><img src="img/nois-proxy.png" alt="Proxy" /></p>
<h5 id="connect-your-chain-to-nois"><a class="header" href="#connect-your-chain-to-nois">Connect your chain to Nois</a></h5>
<p>By the end of this step you should have an IBC transfer channel between your
Chain and Nois, so that you can pay for randomness with NOIS.</p>
<ul>
<li>Configure your relayer software (hermes, go-relayer, ts-relayer) to have Nois
and your chain (Check the
<a href="https://github.com/cosmos/chain-registry/tree/master/nois">chain-registry</a>
for the details)</li>
<li>Create a Client, a connection, and a transfer channel between both chains.</li>
<li>Check that the channel has been created. You can do so in this IBC
<a href="https://ibc.nois.network/connections">mainnet dashboard</a> or
<a href="https://testnet.ibc.nois.network/">testnet dashboard</a></li>
<li>Start the relayer and IBC transfer 1 NOIS from Nois chain to your chain and
check the balance (on destination account) in order to get the IBCed NOIS
denom. write down the IBC denom as you will need this for a later step.</li>
</ul>
<h5 id="install-the-binary-of-your-chain"><a class="header" href="#install-the-binary-of-your-chain">Install the binary of your chain</a></h5>
<p>For this step you can check the docs for your IBC chain. and atthe end of this
step you should be able to run the chain binary. Example:</p>
<pre><code class="language-sh">junod version
</code></pre>
<h5 id="navigate-to-the-nois-contract-releases-link"><a class="header" href="#navigate-to-the-nois-contract-releases-link">Navigate to the Nois contract releases link</a></h5>
<p>navigate to this <a href="https://github.com/noislabs/nois-contracts/releases">link</a> and
you should find a list of releases. scroll to the latest version and expand the
list of artifacts/assets then click and download <strong>nois_proxy.wasm</strong></p>
<h5 id="store-the-nois-proxy-contract-code"><a class="header" href="#store-the-nois-proxy-contract-code">Store the nois-proxy contract code</a></h5>
<pre><code class="language-sh">junod tx wasm store \
       nois_proxy.wasm* \
       --from &lt;your-key&gt; \
       --chain-id uni-6 \
       --gas=auto \
       --gas-adjustment 1.4  \
       --gas-prices 0.025ujunox \
       --broadcast-mode=block \
       --node=https://rpc.uni.juno.deuslabs.fi:443 -y
</code></pre>
<h5 id="instantiate-the-nois-proxy-contract-on-your-chain"><a class="header" href="#instantiate-the-nois-proxy-contract-on-your-chain">instantiate the nois-proxy contract on your chain</a></h5>
<p>The Proxy contract is what will send requests for randomness to Nois Chain via
IBC. It will be the central source of randomness that dapps on your chain can
send requests to.</p>
<p><img src="img/proxy-1.png" alt="Request beacons" /> <img src="img/proxy-2.png" alt="Receive beacons" /></p>
<p>instantiation paramaters description:</p>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Description</th><th>Type</th></tr></thead><tbody>
<tr><td>manager</td><td>You can put your address here. <br>It will allow you to set the proxy config parameters and withdraw any funds held/made by the proxy</td><td>String</td></tr>
<tr><td>prices</td><td>This field will determine how much Dapps need to pay your Proxy Contract when they request randomness. You can set this to whatever denom and amount you like. For example, if you're using a Payment Mode of mode::IbcPay, you might want to do something like this:</td><td></td></tr>
</tbody></table>
</div>
<p>Set Prices to 55 NOIS vec![coin(&quot;unois&quot;, 55_000_000u32)] For each request a Dapp
sends to your Proxy Contract, your Proxy Contract sends 50 NOIS to the gateway
for Nois fees, and you profit 5 NOIS for your service!.<br>Setting this to an
empty list will not make the proxy price free but will stop the contract from
accepting incoming beacon requests. It can be a way to stop the proxy from
serving randomness <br>Please note that these are not the funds that will be
sent over to Nois but only the proxy for the fee. | Vec&lt;Coin&gt; | | test_mode |
Just set this to false. This is only set to true for integration testing |
Boolean | | callback_gas_limit | The amount of gas that the callback to the dapp
can consume. <br>500000 is a good value if you are not sure. | number | | mode |
This defines the operational mode of the proxy:<br>two modes are available:
<br> - <strong>Funded</strong>: In this mode you will need to manually make sure that the
Nois Payment contract (on Nois Chain) always has enough NOIS tokens to process
requests. (Each request costs 50 NOIS). You can think of your Payment Contract
as your &quot;Balance Sheet&quot; or like a &quot;Prepaid Nois Gift Card&quot;.<br> - <strong>IbcPay</strong>: In
this mode the proxy contract sends IBCed NOIS to the gateway for each beacon
request. You need to whether prefill this contract with NOIS or make sure you
set the Nois fee on the prices field so that DAPPs will send the fee upon
request. | Enum |</p>
<h4 id="nois-proxy-modes-explained"><a class="header" href="#nois-proxy-modes-explained">Nois-proxy modes explained</a></h4>
<ul>
<li>Funded <img src="img/proxy-funded.png" alt="Funded" /></li>
<li>IbcPay <img src="img/proxy-ibcpay.png" alt="Receive beacons" /></li>
</ul>
<pre><code class="language-sh">junod tx wasm instantiate &lt;CODE_ID&gt;
  '{&quot;manager&quot;:YOUR_ADDRESS_HERE,
  &quot;prices&quot;:
         [
             {&quot;denom&quot;:&quot;ujunox&quot;,&quot;amount&quot;:&quot;1000000&quot;},
             {&quot;denom&quot;:&quot;ibc/..ibc_NOIS_you_noted_in_a_previous_step&quot;,&quot;amount&quot;:&quot;50000000&quot;}
         ],
  &quot;callback_gas_limit&quot;:500000,
  &quot;test_mode&quot;:false,
  &quot;mode&quot;:{&quot;ibc_pay&quot;:{
         &quot;unois_denom&quot;:{
               &quot;ics20_channel&quot;:&quot;channel-xx&quot;,
               &quot;denom&quot;:&quot;ibc/..ibc_NOIS_you_noted_in_a_previous_step&quot;
               }
 }}}'
--label=nois-proxy
--from &lt;your-key&gt;
--chain-id uni-6
--gas=auto
--gas-adjustment 1.4
--gas-prices 0.025ujunox
--broadcast-mode=block
--node=https://rpc.uni.juno.deuslabs.fi:443 -y
</code></pre>
<h5 id="setup-the-ibc-channel-for-the-wasm-relay---transferring-the-randomness-beacon-not-the-tokens"><a class="header" href="#setup-the-ibc-channel-for-the-wasm-relay---transferring-the-randomness-beacon-not-the-tokens">Setup the IBC channel for the wasm relay - Transferring the randomness beacon not the tokens</a></h5>
<ul>
<li>choose your relayer software (ts-relayer or hermes or go-relayer).</li>
<li>You can create a new IBC client and connection or skip if you want to use the
existing connection (the one that has been created for the token transfer).</li>
<li>Create an IBC channel where the source is the nois-proxy you have just
instantiated on your chain and the destination is the nois-gateway on the Nois
chain (the direction is important). When creating the channel Make sure to use
the wasm port.
<blockquote>
<p>ℹ️ If the nois-gateway address is
nois1x55xhexprdwfl6nfju53hfxj77nsxlj5c9jzyvjuastl9f3dt6jsx6l9yg then the
port will be
<strong>wasm</strong>.nois1x55xhexprdwfl6nfju53hfxj77nsxlj5c9jzyvjuastl9f3dt6jsx6l9yg</p>
</blockquote>
</li>
<li>Upon channel connection/creation the nois-gateway factory creates a payment
contract for your proxy on the Nois chain. This payment contract will be your
balance sheet. So long as the payment contract has enough balance your proxy
will be able to request randomness beacon. So make sure the payment contract
does not run out of $NOIS.</li>
<li>Check that the channel has been created. You can do so in this IBC
<a href="https://ibc.nois.network/connections">mainnet dashboard</a> or
<a href="https://testnet.ibc.nois.network/">testnet dashboard</a></li>
<li>Run the relayer and ask others to run their relayers aswell.</li>
<li>If the proxy mode is on IbcPay make sure to fill the proxy with IBCed NOIS
tokens. (every beacon request will consume $50 NOIS). else if the proxy is on
Funded mode then make sure the payment contract is filled with NOIS tokens.</li>
<li>For performance reasons when using IbcPay mode, it is a good idea to have some
initial 50 $NOIS on the payment, this allows to gateway to process the beacon
even when the ibc token transfer is slower than the beacon request wasm
packet.</li>
<li>If you need some NOIS tokens for your payment contract you can contact us on
discord and describe your usecase so that we give you a NOIS grant</li>
<li>Congrats 🎉 you can use the proxy on your Dapp to get randomness. You can
follow <em>use_nois_randomness</em> page for more details.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="drand_bots.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="randdrop.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="drand_bots.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="randdrop.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
